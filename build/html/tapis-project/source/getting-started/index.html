<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; ICICLE-READTHEDOCS  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            ICICLE-READTHEDOCS
              <img src="https://aiinstitutes.org/wp-content/uploads/2022/07/icicle.jpeg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">AI for CI-for-AI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/ICICLE_Foodshed_Parser.html">Constrained Language Models Yield Few-Shot Semantic Parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/PPOD_CA.html">PPOD_CA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Region2vec.html">Region2vec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Species-Classification-Multimodal-Context.html">Species Classification using Multimodal Heterogeneous Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Species-Classification-Multimodal-Context.html#acknowledgements">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Store_Closure_Website.html">Store_Closure_Website (Version 1)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ICICLE-READTHEDOCS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/tapis-project/source/getting-started/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<span id="id1"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h1>
<p>This Getting Started guide will walk you through the initial steps of setting up
the necessary accounts and installing
the required software before moving to the Tapis Quickstart. If
you are already using Docker Hub and the TACC Cloud APIs, feel free to jump
right to the <a class="reference internal" href="#tapis-quickstart">Tapis Quickstart</a> or check
out the Tapis Live Docs <a class="reference external" href="https://tapis-project.github.io/live-docs/">site</a>.</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#getting-ready" id="id6">Getting Ready</a></p>
<ul>
<li><p><a class="reference internal" href="#curl-or-python-pick-your-path" id="id7">cURL or Python: Pick Your Path</a></p></li>
<li><p><a class="reference internal" href="#amazon-s3" id="id8">Amazon S3</a></p></li>
<li><p><a class="reference internal" href="#a-tacc-account" id="id9">A TACC Account</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tapis-quickstart" id="id10">Tapis Quickstart</a></p>
<ul>
<li><p><a class="reference internal" href="#python-example" id="id11">Python Example</a></p>
<ul>
<li><p><a class="reference internal" href="#getting-a-tapis-token" id="id12">Getting a Tapis Token</a></p></li>
<li><p><a class="reference internal" href="#register-the-s3-storage-with-tapis" id="id13">Register the S3 Storage with Tapis</a></p></li>
<li><p><a class="reference internal" href="#create-an-access-credential" id="id14">Create an Access Credential</a></p></li>
<li><p><a class="reference internal" href="#access-the-files-in-our-s3-bucket" id="id15">Access the files in our S3 Bucket</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#curl-example" id="id16">cURL Example</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id17">Getting a Tapis Token</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id18">Register the S3 Storage with Tapis</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id19">Create an Access Credential</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id20">Access the files in our S3 Bucket</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="getting-ready">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Getting Ready</a><a class="headerlink" href="#getting-ready" title="Link to this heading"></a></h2>
<section id="curl-or-python-pick-your-path">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">cURL or Python: Pick Your Path</a><a class="headerlink" href="#curl-or-python-pick-your-path" title="Link to this heading"></a></h3>
<p>This guide provides examples in both the command line web interface <em>cURL</em> and the Python SDK. cURL is a command line tool for transferring data via URLs and receiving responses; cURL is available in your terminal (for MacOS, Linux, and Unix users), and transfers data from or to a server using one of a number of internet protocols. You could also choose to use a tool like
<a class="reference external" href="https://www.postman.com">Postman</a> which which provides a nice GUI on top of cURL.</p>
<p>To run the Python examples you will need a functioning Python3 environment and the Tapis Python APIs installed on your system (read more about the tapispy project at <a class="reference external" href="https://pypi.org/project/tapipy/">PyPi</a>).</p>
</section>
<section id="amazon-s3">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Amazon S3</a><a class="headerlink" href="#amazon-s3" title="Link to this heading"></a></h3>
<p>In either case you will be accessing an Amazon AWS S3 storage bucket in this Tapis example. In the code we assume you have created an S3 bucket with URL <em>https://&lt;your_bucket_name&gt;.s3.amazonaws.com/</em>
and that you have access to the bucket via an AWS user identity with <code class="docutils literal notranslate"><span class="pre">accessKey</span></code> and <code class="docutils literal notranslate"><span class="pre">accessSecret</span></code>. If you are new to Amazon’s S3 service, you can get started for free to complete this tutorial. Check out their <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/GetStartedWithS3.html">Getting Started Guide</a> and follow the tutorial through <em>Step 2: Upload an object to your bucket</em>. Our example will list the files stored in this bucket, so you may want to upload a file to your bucket so you can verify that your code works; a small image file would do the trick. In the examples below we have created an S3 bucket called <em>tapisbucket</em> and uploaded a single file to it called <em>test_image.jpg</em>.</p>
</section>
<section id="a-tacc-account">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">A TACC Account</a><a class="headerlink" href="#a-tacc-account" title="Link to this heading"></a></h3>
<p>The main instance of the Tapis platform is hosted at the Texas Advanced
Computing Center (<a class="reference external" href="https://tacc.utexas.edu">TACC</a>).
TACC designs and deploys some of the world’s most powerful advanced computing
technologies and innovative software solutions to enable researchers to answer
complex questions.  To follow along with this Quickstart and use the
TACC-hosted Tapis platform, please
create a <a class="reference external" href="https://portal.tacc.utexas.edu/account-request">TACC account</a> .</p>
</section>
</section>
<section id="tapis-quickstart">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Tapis Quickstart</a><a class="headerlink" href="#tapis-quickstart" title="Link to this heading"></a></h2>
<p>In this guide, we will use the Tapis APIs to list files on the Amazon AWS S3 storage system using the
<em>tacc</em> instance of Tapis (an instance of Tapis is called a <strong>tenant</strong>; since Tapis is open source any organization can install it and run their own tenant) with base URL <em>https://tacc.tapis.io</em>. We will work the example in two ways: using cURL from the command line and using a Python script. Pick the path that most closely matches your needs.</p>
<section id="python-example">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Python Example</a><a class="headerlink" href="#python-example" title="Link to this heading"></a></h3>
<section id="getting-a-tapis-token">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">Getting a Tapis Token</a><a class="headerlink" href="#getting-a-tapis-token" title="Link to this heading"></a></h4>
<p>To begin we use our TACC account credentials to get a Tapis token from the authenticator. A valid token is needed
to interact with Tapis. You will note that your token is returned with an expiration date and time. If
you want to continue to use Tapis after your token expires, you will need to get a new one following the same
steps.</p>
<p>In Python code below you will replace <em>your_tacc_username</em> and <em>your_tacc_password</em> with your TACC username and password, preserving the quotation marks shown in the command below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tapipy.tapis</span> <span class="kn">import</span> <span class="n">Tapis</span>

<span class="c1"># Create python Tapis client for user</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tapis</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span> <span class="s2">&quot;https://tacc.tapis.io&quot;</span><span class="p">,</span>
          <span class="n">username</span><span class="o">=</span><span class="s2">&quot;your_tacc_username&quot;</span><span class="p">,</span>
          <span class="n">password</span><span class="o">=</span><span class="s2">&quot;your_tacc_password&quot;</span><span class="p">)</span>

<span class="c1"># Call to Tokens API to get access token</span>
<span class="n">t</span><span class="o">.</span><span class="n">get_tokens</span><span class="p">()</span>
</pre></div>
</div>
<p>This call does not produce output. However you can use the following code to see the access token you just created.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">access_token</span>
</pre></div>
</div>
<p>The output should look similar to the following; it describes the access token that was just created.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>access_token: *very long string of alphanumeric characters*
claims: {&#39;jti&#39;: &#39;007fa9e6-f044-4817-a812-12292b2bdbe3&#39;, &#39;iss&#39;: &#39;https://tacc.tapis.io/v3/tokens&#39;, &#39;sub&#39;: &#39;your_tacc_username&#39;, &#39;tapis/tenant_id&#39;: &#39;tacc&#39;, &#39;tapis/token_type&#39;: &#39;access&#39;, &#39;tapis/delegation&#39;: False, &#39;tapis/delegation_sub&#39;: None, &#39;tapis/username&#39;: &#39;your_tacc_username&#39;, &#39;tapis/account_type&#39;: &#39;user&#39;, &#39;exp&#39;: 1657686889, &#39;tapis/client_id&#39;: None, &#39;tapis/grant_type&#39;: &#39;password&#39;}
expires_at: 2022-07-13 04:34:49+00:00
expires_in: &lt;function Tapis.add_claims_to_token.&lt;locals&gt;._expires_in at 0x10a070280&gt;
jti: 007fa9e6-f044-4817-a812-12292b2bdbe3
original_ttl: 14400
</pre></div>
</div>
<p>Where you will have your own access token and the placeholder <em>your_tacc_username</em> will be replaced with the username you used.</p>
</section>
<section id="register-the-s3-storage-with-tapis">
<h4><a class="toc-backref" href="#id13" role="doc-backlink">Register the S3 Storage with Tapis</a><a class="headerlink" href="#register-the-s3-storage-with-tapis" title="Link to this heading"></a></h4>
<p>Now that we have an access token, we are ready to create a Tapis <code class="docutils literal notranslate"><span class="pre">system</span></code> object. Remember that the Tapis APIs are a framework for accessing a wide variety of computational resources: for this example, we will register the S3 bucket we pre-created with Amazon’s AWS S3 service (if this is unfamiliar to you, refer back to the <a class="reference internal" href="#getting-ready">Getting Ready</a> section above). This step registers the S3 bucket with Tapis so it can access the bucket on your behalf. Note that the value of <code class="docutils literal notranslate"><span class="pre">id</span></code> needs to be unique within the Tapis tenant you are using; for this example we show the string <em>your_tapis_system_id</em>, but you’ll need to choose your own globally (within the Tapis tenant you are using) unique id (possibly including your user name, for example, or some other unique id; for example, something like <em>username.tapis_test_v1</em>). The values for <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">bucketName</span></code> are set based on the values you used when you set up your own AWS S3 bucket, as discussed above. In this example they are</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># To register the S3 bucket with Tapis</span>
<span class="c1"># the description of an S3 bucket</span>
<span class="n">s3_bucket</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;your_tapis_system_id&quot;</span><span class="p">,</span>
  <span class="s2">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Tapis Test Bucket&quot;</span><span class="p">,</span>
  <span class="s2">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;tapisbucket.s3.amazonaws.com&quot;</span><span class="p">,</span>
  <span class="s2">&quot;systemType&quot;</span><span class="p">:</span><span class="s2">&quot;S3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;defaultAuthnMethod&quot;</span><span class="p">:</span><span class="s2">&quot;ACCESS_KEY&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bucketName&quot;</span><span class="p">:</span><span class="s2">&quot;tapisbucket&quot;</span><span class="p">,</span>
  <span class="s2">&quot;canExec&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># create the system in Tapis</span>
<span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">createSystem</span><span class="p">(</span><span class="o">**</span><span class="n">s3_bucket</span><span class="p">)</span>
</pre></div>
</div>
<p>The output of the command will show the URL to the system you just created in the Tapis tenant.</p>
</section>
<section id="create-an-access-credential">
<h4><a class="toc-backref" href="#id14" role="doc-backlink">Create an Access Credential</a><a class="headerlink" href="#create-an-access-credential" title="Link to this heading"></a></h4>
<p>With our system created and linked to the S3 storage bucket, we need to create an access credential for Tapis to access our bucket on our behalf. Note that in this example we have created an access key and secret for the IAM user in our AWS instance; when substituting your own access key and secret into the code below, remember to preserve the single quotation marks enclosing these pieces of data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">createUserCredential</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s1">&#39;your_tapis_system_id&#39;</span><span class="p">,</span>
                               <span class="n">userName</span><span class="o">=</span><span class="s1">&#39;your_tacc_username&#39;</span><span class="p">,</span>
                               <span class="n">accessKey</span><span class="o">=</span><span class="s1">&#39;IAM user access key that you created in the AWS interface&#39;</span><span class="p">,</span>
                               <span class="n">accessSecret</span><span class="o">=</span><span class="s1">&#39;access secret from the AWS interface for the key you created&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The output of the command should look similar to the text below.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;result&#39;: None,
&#39;status&#39;: &#39;success&#39;,
&#39;message&#39;: &#39;SYSAPI_CRED_UPDATED Credential updated. jwtTenant: tacc jwtUser: your_tacc_username OboTenant: tacc OboUser: your_tacc_username System: your_tapis_system_id User: your_tacc_username&#39;,
&#39;version&#39;: &#39;1.2.1&#39;,
&#39;metadata&#39;: None}
</pre></div>
</div>
</section>
<section id="access-the-files-in-our-s3-bucket">
<h4><a class="toc-backref" href="#id15" role="doc-backlink">Access the files in our S3 Bucket</a><a class="headerlink" href="#access-the-files-in-our-s3-bucket" title="Link to this heading"></a></h4>
<p>We are now able to list files in our bucket using the Files API (you can also use the API to add new files, delete files, rename files, and so on; but since this is a example, we’ve just selected a file listing as the example operation).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">listFiles</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s2">&quot;your_tapis_system_id&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The output should include a list of all files in the bucket. For this example we only put one file in our bucket, test_image.jpg. The listing returns the name of that file along with some metadata:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[
group: None
lastModified: 2022-05-20T19:24:24Z
mimeType: image/jpg
name: test_image.jpg
nativePermissions: None
owner: None
path: /test_image.jpg
size: 87060
type: file
url: tapis://your_tapis_system_id/test_image.jpg]
</pre></div>
</div>
</section>
</section>
<section id="curl-example">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">cURL Example</a><a class="headerlink" href="#curl-example" title="Link to this heading"></a></h3>
<p>As with the Python example, we will use the Tapis APIs to list files on the Amazon AWS S3 storage system using the <em>tacc</em> tenant with base URL <em>https://tacc.tapis.io</em>.</p>
<section id="id2">
<h4><a class="toc-backref" href="#id17" role="doc-backlink">Getting a Tapis Token</a><a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<p>To begin we use our TACC account credentials to get a Tapis token from the authenticator. A valid token is needed
to interact with Tapis. You will note that your token is returned with an expiration date and time. If
you want to continue to use Tapis after your token expires, you will need to get a new one following the same
steps.</p>
<p>Type the curl command below into your terminal window, replacing <em>your_tacc_username</em> and <em>your_tacc_password</em> with your TACC user name and password, preserving the quotation marks.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -H &quot;Content-type: application/json&quot; -d &#39;{&quot;username&quot;: &quot;your_tacc_username&quot;, &quot;password&quot;: &quot;your_tacc_password&quot;, &quot;grant_type&quot;: &quot;password&quot; }&#39; https://tacc.tapis.io/v3/oauth2/tokens
</pre></div>
</div>
</div></blockquote>
<p>The output of this operation will look like the following (line breaks have been added for clarity in reading; your
response string will not have line breaks); the phrase <em>&lt;your access token string will be here&gt;</em> will be replaced with your token access string, which is an 834 character alphanumeric string. Notice the expiration time in the return string.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{“message”:”Token created successfully.”,
 ”metadata”:{},
 ”result”:{“access_token”:{“access_token”:”&lt;your access token string will be here&gt;”,
    ”expires_at”:”2022-05-05T19:53:03.801252+00:00”,
    ”expires_in”:14400,”jti”:”8ef1d271-b923-49af-b2dd-ae05cc5da1ed”}},
 ”status”:”success”,
 ”version”:”dev”}
</pre></div>
</div>
<p>To work through the rest of the examples in this guide, you will need to add the token from the curl command to your environment using the variable name <code class="docutils literal notranslate"><span class="pre">JWT</span></code>. The example below shows how I added it to zsh (a bash variant); the precise method may vary with your shell:</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ export JWT=your_access_token_string
</pre></div>
</div>
</div></blockquote>
</section>
<section id="id3">
<h4><a class="toc-backref" href="#id18" role="doc-backlink">Register the S3 Storage with Tapis</a><a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<p>Now that we have an access token, we are ready to create a Tapis <code class="docutils literal notranslate"><span class="pre">system</span></code> object. Remember that the Tapis APIs are a framework for accessing a wide variety of computational resources: for this example, we will register the S3 bucket we pre-created with Amazon’s AWS S3 service (if this is unfamiliar to you, refer back to the <a class="reference internal" href="#getting-ready">Getting Ready</a> section above). This step registers the S3 bucket with Tapis so it can access the bucket on your behalf. Note that the value of <code class="docutils literal notranslate"><span class="pre">id</span></code> needs to be unique within the Tapis tenant you are using; for this example we show the string <em>your_tapis_system_id</em>, but you’ll need to choose your own globally (within the Tapis tenant you are using) unique id (possibly including your user name, for example, or some other unique id; for example, something like <em>username.tapis_test_v1</em>, but you’ll need to select your own ). The values for <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">bucketName</span></code> are set based on the you used when you set up your own AWS S3 bucket, as discussed above.</p>
<p>To keep the cURL command (relatively) readable, you first need to create a file in your path with the details of your S3 storage and Tapis system formatted as a JSON object; in this example we use the filename <em>system_s3.json</em>, with the following contents:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;id&quot;:&quot;your_tapis_system_id&quot;,
  &quot;description&quot;:&quot;Tapis cURL Test Bucket&quot;,
  &quot;host&quot;:&quot;tapisbucket.s3.amazonaws.com&quot;,
  &quot;systemType&quot;:&quot;S3&quot;,
  &quot;defaultAuthnMethod&quot;:&quot;ACCESS_KEY&quot;,
  &quot;bucketName&quot;:&quot;tapisbucket&quot;,
  &quot;canExec&quot;: False
}
</pre></div>
</div>
<p>Then you’ll execute the following cURL command, being sure to specify the name of the file you created if you chose a different name:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; https://your_tapis_system_id/v3/systems -d @system_s3.json
</pre></div>
</div>
<p>The output of the command will show the URL to the system you just created in the Tapis tenant.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;result&quot;: {
    &quot;url&quot;: &quot;http://tacc.tapis.io/v3/systems/your_tapis_system_id&quot;
  },
  &quot;status&quot;: &quot;success&quot;,
  &quot;message&quot;: &quot;SYSAPI_CREATED New system created. jwtTenant: tacc jwtUser: your_tacc_username OboTenant: tacc OboUser: your_tacc_username System: your_tapis_system_id&quot;,
  &quot;version&quot;: &quot;1.2.3&quot;,
  &quot;metadata&quot;: null
}
</pre></div>
</div>
</section>
<section id="id4">
<h4><a class="toc-backref" href="#id19" role="doc-backlink">Create an Access Credential</a><a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<p>With our system created and linked to the S3 storage bucket, we need to create an access credential for Tapis to access our bucket on our behalf. Note that in this example we have created an access key and secret for the IAM user in our AWS instance; when substituting your own access key and secret into the code below, remember to preserve the single quotation marks enclosing these pieces of data.</p>
<p>Again, to keep the cURL command (relatively) readable, you first need to create a file in your path with the details of your S3 access key formatted as a JSON object; in this example we use the filename cred_tmp.json, with the following contents:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;accessKey&quot;:&quot;IAM user access key that you created in the AWS interface&quot;,
  &quot;accessSecret&quot;:&quot;access secret from the AWS interface for the key you created&quot;
}
</pre></div>
</div>
<p>Then you’ll execute the following cURL command, being sure to specify the name of the file you created if you chose a different name:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems/credential/your_tapis_system_id/user/your_tacc_username -d @cred_tmp.json
</pre></div>
</div>
<p>The output of the command will show will look similar to that below.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;result&quot;: null,
  &quot;status&quot;: &quot;success&quot;,
  &quot;message&quot;: &quot;SYSAPI_CRED_UPDATED Credential updated. jwtTenant: tacc jwtUser: your_tacc_username OboTenant: tacc OboUser: your_tacc_username System: your_tapis_system_id User: your_tacc_username&quot;,
  &quot;version&quot;: &quot;1.2.3&quot;,
  &quot;metadata&quot;: null
}
</pre></div>
</div>
</section>
<section id="id5">
<h4><a class="toc-backref" href="#id20" role="doc-backlink">Access the files in our S3 Bucket</a><a class="headerlink" href="#id5" title="Link to this heading"></a></h4>
<p>We are now able to list files in our bucket using the Files API. If you look closely at the URL you’ll see that we are using the <em>files</em> access point – this URL returns a listing of the files in your bucket along with some metadata. Recall that for our example the bucket has a single image in it.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>curl -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/files/ops/your_tapis_system_id/
</pre></div>
</div>
<p>The output of the command will show will look similar to that below, where the path and file name will reflect how you set up your own S3 bucket and the file(s) you put in it. We added line breaks to the output below for readability.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;status&quot;:&quot;success&quot;,
  &quot;message&quot;:&quot;ok&quot;,
  &quot;result&quot;:
  [
    {
      &quot;mimeType&quot;:&quot;image/jpg&quot;,
      &quot;type&quot;:&quot;file&quot;,
      &quot;owner&quot;:null,
      &quot;group&quot;:null,
      &quot;nativePermissions&quot;:null,
      &quot;url&quot;:&quot;tapis://your_tapis_system_id/test_image.jpg&quot;,
      &quot;lastModified&quot;:&quot;2022-05-20T19:24:24Z&quot;,
      &quot;name&quot;:&quot;test_image.jpg&quot;,
      &quot;path&quot;:&quot;/test_image.jpg&quot;,
      &quot;size&quot;:87060
    }
  ],
  &quot;version&quot;:&quot;1.2.2&quot;,&quot;metadata&quot;:{}
}
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ICICLE.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>