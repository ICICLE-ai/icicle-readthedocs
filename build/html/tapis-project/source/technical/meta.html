<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meta &mdash; ICICLE-READTHEDOCS  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            ICICLE-READTHEDOCS
              <img src="https://aiinstitutes.org/wp-content/uploads/2022/07/icicle.jpeg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">AI for CI-for-AI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/ICICLE_Foodshed_Parser.html">Constrained Language Models Yield Few-Shot Semantic Parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/PPOD_CA.html">PPOD_CA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Region2vec.html">Region2vec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Species-Classification-Multimodal-Context.html">Species Classification using Multimodal Heterogeneous Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Species-Classification-Multimodal-Context.html#acknowledgements">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Store_Closure_Website.html">Store_Closure_Website (Version 1)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ICICLE-READTHEDOCS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Meta</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/tapis-project/source/technical/meta.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="meta">
<span id="id1"></span><h1>Meta<a class="headerlink" href="#meta" title="Link to this heading"></a></h1>
<p>Meta V3 is a REST API Microservice for MongoDB which provides server-side Data, Identity and Access Management for Web and Mobile applications.</p>
<section id="why-meta-v3">
<h2>Why Meta V3<a class="headerlink" href="#why-meta-v3" title="Link to this heading"></a></h2>
<p>Meta V2 functionality was built on MongoDB version 1.0 technology. Although limited, it brought the basic functions of a document
store to Agave/Tapis platform. Some projects decided to use basic key/value storage to add metadata to Jobs, Apps, Systems and Files.
Other projects stored complex document data to associate Jobs and other entities to add a richer information layer to their portals.
The limited search functionality and imposed document structure created impediments to using MongoDB as projects had envisioned.
Meta V3 removes these impediments.</p>
<p>Meta V3 is built on top of MongoDB version 4.2 technology. The REST API opens up the full functionality of MongoDB as a document store.
and delivers MongoDB as a service so that projects are free to create metadata and documents in a fashion that fits their needs.
Some of the Meta V3 advantages over Meta V2 include:</p>
<ul class="simple">
<li><p>Any valid MongoDB document structure can be used.</p></li>
<li><p>If a search runs in MongoDB CLI, it should run from the API.</p></li>
<li><p>Aggregations are available.</p></li>
<li><p>Database, collection and document creation can be managed by tenant administrator.</p></li>
<li><p>Performance is many times faster.</p></li>
</ul>
</section>
<section id="migration-from-meta-v2-to-v3">
<h2>Migration from Meta V2 to V3<a class="headerlink" href="#migration-from-meta-v2-to-v3" title="Link to this heading"></a></h2>
<p>Migration can simply be accomplished by creating a new database with one or more collections for your project.
The tenant administrator can request the initial permissions setup. Once your collection(s) are in place move the
result and associatedIds into your new document model.</p>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Meta V3 is:</p>
<p>A Stateless Microservice.
With Meta V3 projects can focus on building Angular or other frontend applications, because most of the server-side
logic necessary to manage database operations, authentication / authorization and related APIs is automatically handled,
without the need to write any server-side code except for the UX/UI.</p>
<p>For example, to insert data into MongoDB a developer has to just create client-side JSON documents and then execute POST operations via HTTP to Meta V3.
Other functions of a modern MongoDB installation like flexible schema, geoJson and aggregation pipelines ease the development process.</p>
<p>Every tenant will have access to at least one database where they can store and manage json documents. Documents are the trailing end
of a nested hierarchy of data that begins with a database that houses one or more collections. The collections house json documents
the structure of which is left up to the administrators of the tenant database.</p>
<p>Permissions for access to databases, collections and documents must be predefined before accessing those resources. The definitions
for access are defined within the Security Kernel API of Tapis V3 and must be added by a tenant or service administrator.
See the Permissions section below for some examples of permissions definitions and access to resources in the Meta V3 API.</p>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h2>
<section id="create-a-document">
<h3>Create a document<a class="headerlink" href="#create-a-document" title="Link to this heading"></a></h3>
<p>We have a database named MyTstDB and a collection name MyCollection. To add a json document to MyCollection, we can do the following:</p>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X POST -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; --data &#39;{&quot;name&quot;: &quot;test document slt 7.21.2020-14:27&quot;,&quot;jimmyList&quot;: [&quot;1&quot;,&quot;3&quot;],&quot;description&quot;: &quot;new whatever&quot;,}&#39;  $BASE_URL/v3/meta/MyTstDB/MyCollection?basic=true
</pre></div>
</div>
<p>The response will have an empty response body with a status code of 201 “Created” unless the “basic” url query parameter is set to true.
Setting the “basic” parameter to true will give a Tapis Basic response along with the “_id” of the newly created document. A more detailed discussion
of autogenerated ids and specified ids can be found in the “Create Document” section of “Document Resources”.</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f189316e37f7b5a692285f3&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;201&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Created&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="list-documents">
<h3>List documents<a class="headerlink" href="#list-documents" title="Link to this heading"></a></h3>
<p>Using our MyTstDb/MyCollection resources we can ask for a default list of documents in MongoDB default sorted order. The document we created earlier
should be listed with a new “_id” field that was autogenerated by MongoDB.</p>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; $BASE_URL/v3/meta/MyTstDB/MyCollection
</pre></div>
</div>
<p>The response will be an array of json documents from MyCollection :</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f189316e37f7b5a692285f3&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test document slt 7.21.2020-14:27&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jimmyList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new whatever&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f189316296c81742a6a3e4c&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ece37f7b5a692285e9&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test document slt 7.21.2020-14:25&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jimmyList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new whatever&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ec296c81742a6a3e4b&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</section>
<section id="get-a-document">
<h3>Get a document<a class="headerlink" href="#get-a-document" title="Link to this heading"></a></h3>
<p>If we know the “_id” of a created document, we can ask for it directly.</p>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; $BASE_URL/v3/meta/MyTstDB/MyCollection/5f1892ece37f7b5a692285e9
</pre></div>
</div>
<p>The response will be a json document from MyCollection with the “_id” of 5f1892ece37f7b5a692285e9 :</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ece37f7b5a692285e9&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test document slt 7.21.2020-14:25&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;jimmyList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;3&quot;</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new whatever&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ec296c81742a6a3e4b&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="find-a-document">
<h3>Find a document<a class="headerlink" href="#find-a-document" title="Link to this heading"></a></h3>
<p>We can pass a query parameter named “filter” and set the value to a json MongoDB query document. Let’s find a document by a specific “name”.</p>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot; -H &quot;X-Tapis-Token:$jwt&quot; --data-urlencode filter=&#39;{&quot;name&quot;: &quot;test document slt 7.21.2020-14:25&quot;}&#39; $BASE_URL/v3/meta/MyTstDB/MyCollection
</pre></div>
</div>
<p>The response will be an array of json documents from MyCollection :</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ece37f7b5a692285e9&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test document slt 7.21.2020-14:25&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jimmyList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new whatever&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ec296c81742a6a3e4b&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Link to this heading"></a></h2>
<section id="general-resources">
<h3>General resources<a class="headerlink" href="#general-resources" title="Link to this heading"></a></h3>
<p>An unauthenticated Health check is in included in the Meta V3 API to let any user know the current condition of the service.</p>
<p><strong>Health Check</strong></p>
<p>An unauthenticated request for the health status of Meta V3 API.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.healthCheck()
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot; $BASE_URL/v3/meta/
</pre></div>
</div>
<p>The response will be a Basic Tapis response on health:</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;200&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="root-resources">
<h3>Root resources<a class="headerlink" href="#root-resources" title="Link to this heading"></a></h3>
<p>The Root resource space represents the root namespace for databases on the MongoDB host. All databases are located here.
Requests to this space are limited to READ only for tenant administrators.</p>
<p><strong>List DB Names</strong></p>
<p>A request to the Root resource will list Database names found on the server. This request has been limited to those users with tenant administrative roles.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.listDBNames()
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; $BASE_URL/v3/meta/
</pre></div>
</div>
<p>The response will a json list of database names:</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;StreamsDevDB&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;v1airr&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</section>
<section id="database-resources">
<h3>Database resources<a class="headerlink" href="#database-resources" title="Link to this heading"></a></h3>
<p>The Database resource is the top level for many tenant projects. The resource maps directly to a MongoDB named database in the database server.
Case matters for matching the name of the database and must be specified when making requests for collections or documents. Currently</p>
<p><strong>List Collection Names</strong></p>
<p>This request will return a list of collection names from the specified database {db}. The permissions for access to the
database are set prior to access.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.listCollectionNames(db=&#39;&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;&#39; $BASE_URL/v3/meta/{db}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;streams_alerts_metadata&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;streams_channel_metadata&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;streams_instrument_index&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;streams_project_metadata&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;streams_templates_metadata&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;tapisKapa-local&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p><strong>Get DB Metadata</strong></p>
<p>This request will return the metadata properties associated with the database. The core server generates an etag in the _properties collection for a database
that is necessary for future deletion.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.getDBMetadata(db=&#39;&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;&#39; $BASE_URL/v3/meta/{db}/_meta
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;_meta&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5ef6232b296c81742a6a3e02&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p><strong>Create DB</strong></p>
<p>TODO: this implementation is not exposed. Creation of a database by tenant administrators is scheduled for inclusion in
an administrative interface API in a future release.</p>
<p>This request will create a new named database in the MongoDB root space by a tenant or service administrator.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.createDB(db=&#39;&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X PUT -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;&#39; $BASE_URL/v3/meta/{db}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 200 ok
</pre></div>
</div>
</div>
<p><strong>Delete a DB</strong>
TODO: this implementation is not exposed. Deletion of a database by tenant administrators is scheduled for inclusion in
an administrative interface API in a future release.</p>
<p>This request will delete a named database in the MongoDB root space by a tenant or service administrator.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.deleteDB(db=&#39;&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X DELETE -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;&#39; $BASE_URL/v3/meta/{db}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 204 Deleted DB
</pre></div>
</div>
</div>
</section>
<section id="collection-resources">
<h3>Collection Resources<a class="headerlink" href="#collection-resources" title="Link to this heading"></a></h3>
<p>The Collection resource allows requests for managing and querying json documents within a MongoDB collection.</p>
<p><strong>Create a Collection</strong></p>
<p>You can create a new collection of documents by specifying a collection name under a specific database. /v3/meta/{db}/{collection}</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.createCollection(db=&#39;&#39;,collection=&#39;&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X PUT -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; $BASE_URL/v3/meta/{db}/{collection}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 201 Collection created. An Etag header value is returned for collection identification
</pre></div>
</div>
</div>
<p><strong>List Documents</strong></p>
<p>A default number of documents found in the collection are returned in an array of documents.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.listDocuments(db=&#39;&#39;,collection=&#39;&#39;,filter=&#39;&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;&#39; $BASE_URL/v3/meta/{db}/{collection}
</pre></div>
</div>
<p>The response will look like the following:</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ece37f7b5a692285e9&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test document slt 7.21.2020-14:25&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new whatever&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ec296c81742a6a3e4b&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ece37f7b5a69228533&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test document slt 7.21.2020-14:25&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new whatever&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ec296c81742a6a3e444&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p><strong>List Documents Large Query</strong></p>
<p>A default number of documents found in the collection are returned in an array of documents.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.submitLargeQuery(db=&#39;&#39;,collection=&#39;&#39;,page=&#39;&#39;,pagesize=&#39;&#39;,sort=&#39;&#39;,keys=&#39;&#39;,fileinput)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d @FILENAME &#39;&#39; $BASE_URL/v3/meta/{db}/{collection}/_filter
</pre></div>
</div>
<p>The response will look like the following:</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ece37f7b5a692285e9&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test document slt 7.21.2020-14:25&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new whatever&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ec296c81742a6a3e4b&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ece37f7b5a69228533&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test document slt 7.21.2020-14:25&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new whatever&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f1892ec296c81742a6a3e444&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p><strong>Delete a Collection</strong></p>
<p>This administrative method is only available to tenant or meta administrators and requires an If-Match header parameter of the Etag for
the collection. The Etag value, if not already known, can be retrieved from the “_meta” call for a collection.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.deleteCollection(db=&#39;&#39;,collection=&#39;&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X DELETE -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; $BASE_URL/v3/meta/{db}/{collection}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 204 Deleted named collection from the database
</pre></div>
</div>
</div>
<p><strong>Get Collection Size</strong></p>
<p>You can find the given size or number of documents in a given collection by calling “_size” on a collection.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.getCollectionSize(db=&#39;&#39;,collection=&#39; &#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; $BASE_URL/v3/meta/{db}/{collection}/_size
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 200 ok

{
  &quot;_size&quot;: 1
}
</pre></div>
</div>
</div>
<p><strong>Get Collection Metadata</strong></p>
<p>You can find the metadata properties of a given collection by calling “_meta” on a collection. This would include the Etag value for a collection
that is needed for deletion.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.getCollectionMetadata(db=&#39;&#39;,collection=&#39; &#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; $BASE_URL/v3/meta/{db}/{collection}/_meta
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;_meta&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;_etag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$oid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5f2b2b7a204ce7637579c85f&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="document-resources">
<h3>Document Resources<a class="headerlink" href="#document-resources" title="Link to this heading"></a></h3>
<p>Document resources are json documents found in a collection. Reading, creating, deleting and updating documents along with batch
processing make up the operations that can be applied to documents in a collection. There various ways to retrieve one or more documents from a collection,
including using a filter query parameter and value in the form of a MongoDB query document. Batch addition of documents, as well as, batch updates based on
queries is also allowed.</p>
<p><strong>Create a Document</strong></p>
<p>Creating a new document within a collection. Submitting a json document within the request body of a POST request will create a new document
within the specified collection with a MongoDB autogenerated “_id”. Batch document addition is possible by POSTing an array of new documents
with a request body for the specified collection. The rules for “_id” creation operates the same way on multiple documents as they do with a single
document.</p>
<p>The default representation returned is an empty response body along with a 201 Http status code “Created”. However if an additional query
parameter named “basic” is added with the value of “true” a basic Tapis response is returned along with the newly created “_id” of the document.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.createDocument(db=&#39;&#39;,collection=&#39; &#39;,basic=&#39; &#39;,request_body=&#39; &#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X POST -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;{&quot;docName&quot;:&quot;test doc&quot;}&#39; $BASE_URL/v3/meta/{db}/{collection}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 201 Document created
</pre></div>
</div>
</div>
<p>Multiple documents can be added to a collection by POSTing a json array of documents. The batch addition of documents only supports the default response.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.createDocument(db=&#39;&#39;,collection=&#39; &#39;,basic=&#39; &#39;, request_body=&#39; &#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X POST -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;[{&quot;docName&quot;:&quot;test doc1&quot;},{&quot;docName&quot;:&quot;test doc2&quot;}]&#39; $BASE_URL/v3/meta/{db}/{collection}
</pre></div>
</div>
<p>The response body will be empty:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 201 Document created
</pre></div>
</div>
</div>
<p><strong>Get a Document</strong></p>
<p>Get a specific document by its “_id”.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.getDocument(db=&#39;&#39;,collection=&#39; &#39;,docId=&#39; &#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X GET -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot;  $BASE_URL/v3/meta/{db}/{collection}/{document_id}
</pre></div>
</div>
<p>The response will be the standard json response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 200 Document returned
{
    &quot;_id&quot;}
</pre></div>
</div>
</div>
<p><strong>Replace a Document</strong></p>
<p>This call replaces an existing document identified by document id  (“_id”), with the json supplied in the request body.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.replaceDocument(db=&#39;&#39;,collection=&#39; &#39;,docId=&#39; &#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X PUT -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;{&quot;docName&quot;:&quot;test doc another one&quot;}&#39; $BASE_URL/v3/meta/{db}/{collection}/{document_id}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 201 document upserted
</pre></div>
</div>
</div>
<p><strong>Modify a Document</strong></p>
<p>This call will replace a portion of a document identified by document id (“_id”) with the supplied json.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.modifyDocument(db=&#39;&#39;,collection=&#39; &#39;,docId=&#39; &#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X PATCH -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;{&quot;docName&quot;:&quot;test changed&quot;}&#39; $BASE_URL/v3/meta/{db}/{collection}/{document_id}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 201 document modified
</pre></div>
</div>
</div>
<p><strong>Delete Document</strong></p>
<p>Deleting a document with a specific document id (“_id”), removes it from the collection.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.deleteDocument(db=&#39;&#39;,collection=&#39; &#39;,docId=&#39; &#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X DELETE -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;&#39; $BASE_URL/v3/meta/{db}/{collection}/{document_id}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 204 Document deleted
</pre></div>
</div>
</div>
</section>
<section id="index-resources">
<h3>Index Resources<a class="headerlink" href="#index-resources" title="Link to this heading"></a></h3>
<p>Indexes can help speed up queries of your collection and the API gives you the ability to define and manage your indexes.
You can create an index for a collection, list indexes for a collection and delete an index. Indexes can’t be updated they
must be deleted and recreated.</p>
<p><strong>List Indexes</strong></p>
<p>List the indexes defined for a collection.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.listIndexes(db=&#39;database_name&#39;,collection=&#39;collection_name&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X POST -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot;  $BASE_URL/v3/meta/{db}/{collection}/_indexes
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;key&quot;</span><span class="p">:{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="s2">&quot;_id_&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p><strong>Create Index</strong></p>
<p>Create a new Index with a new name. To create an index you have to specify the keys and the index options.
Let’s create an unique, sparse index on property qty and name our index “qtyIndex”.</p>
<p>PUT /v3/meta/{db}/{collection}/_indexes/qtyIndex</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;keys&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;qty&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="nt">&quot;ops&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;unique&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;sparse&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}}</span>
</pre></div>
</div>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.createIndex(db=&#39;jupyterhub_v3_metadata&#39;, collection=&#39;jupyterhub_dev&#39;, request_body={request_body}, indexName=&#39;test&#39;
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X PUT -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;{ &quot;keys&quot;:  &lt;keys&gt;, &quot;ops&quot;: &lt;options&gt; }&#39; $BASE_URL/v3/meta/{db}/{collection}/_indexes/{indexName}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 201 Empty Response
</pre></div>
</div>
</div>
<p><strong>Delete Index</strong></p>
<p>Remove a named Index from the index list.</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta.deleteIndex(db=&#39;jupyterhub_v3_metadata&#39;, collection=&#39;jupyterhub_dev&#39;, indexName=&#39;test1&#39;)
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X DELETE -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; $BASE_URL/v3/meta/{db}/{collection}/_indexes/{indexName}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 204 Deleted index from collection
</pre></div>
</div>
</div>
</section>
<section id="aggregation-resources">
<h3>Aggregation Resources<a class="headerlink" href="#aggregation-resources" title="Link to this heading"></a></h3>
<p>Aggregations operations process data records and return computed results. Aggregation operations group values from
multiple documents together, and can perform a variety of operations on the grouped data to return a single result.
Aggregations in the API are predefined and added to a collections properties. They may also be parameterized for use
with multiple sets of inputs.</p>
<p><strong>Create an Aggregation</strong></p>
<p>Create an aggregation pipeline by adding the aggregation to the collection for future execution. The aggregation may have
variables that are defined so that a future request may pass variable values for aggregation execution. See “Execute an Aggregation”.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;aggrs&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;stages&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$match&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$var&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$group&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;_id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$name&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;avg_age&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$avg&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$age&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">          </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pipeline&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;uri&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example-pipeline&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Mandatory</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>yes</p></td>
<td><ul class="simple">
<li><p>for aggregation pipeline operations is “pipeline”</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>uri</p></td>
<td><p>yes</p></td>
<td><ul class="simple">
<li><p>specifies the URI when the operation is bound under the path /&lt;db&gt;/&lt;collection&gt;/_aggrs.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>stages</p></td>
<td><p>yes</p></td>
<td><ul class="simple">
<li><p>the MongoDB aggregation pipeline stages.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>For more information refer to <a class="reference external" href="https://docs.mongodb.org/manual/core/aggregation-pipeline/">https://docs.mongodb.org/manual/core/aggregation-pipeline/</a></p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta  To Appear in Future Release
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X PUT -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot;
     -d &#39;{ &quot;aggrs&quot; : [{ &quot;stages&quot; : [ { &quot;$match&quot; : { &quot;name&quot; : { &quot;$var&quot; : &quot;n&quot; } } },{ &quot;$group&quot; : { &quot;_id&quot; : &quot;$name&quot;,&quot;avg_age&quot; : { &quot;$avg&quot; : &quot;$age&quot; }} } ],
        &quot;type&quot; : &quot;pipeline&quot;,&quot;uri&quot; : &quot;example-pipeline&quot;}]}&#39; $BASE_URL/v3/meta/{db}/{collection}
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 201 empty response body on created
</pre></div>
</div>
</div>
<p><strong>Execute an Aggregation</strong></p>
<p>TODO</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta  To Appear in Future Release
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X POST -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;&#39; $BASE_URL/v3/meta/
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>TODO
</pre></div>
</div>
</div>
<p><strong>Delete an Aggregation</strong></p>
<p>TODO</p>
<p>With pySDK operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ t.meta To Appear in Future Release
</pre></div>
</div>
<p>With CURL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl -v -X POST -H &quot;Content-Type:application/json&quot;  -H &quot;X-Tapis-Token:$jwt&quot; -d &#39;&#39; $BASE_URL/v3/meta/
</pre></div>
</div>
<p>Here is an example response:</p>
<div class="foldable docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status: 204 Empty response body on delete
</pre></div>
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ICICLE.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>