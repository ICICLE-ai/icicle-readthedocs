<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Files &mdash; ICICLE-READTHEDOCS  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="https://aiinstitutes.org/wp-content/uploads/2022/07/icicle.jpeg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">AI for CI-for-AI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/ICICLE_Foodshed_Parser.html">Constrained Language Models Yield Few-Shot Semantic Parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/PPOD_CA.html">PPOD_CA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Region2vec.html">Region2vec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Species-Classification-Multimodal-Context.html">Species Classification using Multimodal Heterogeneous Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Store_Closure_Website.html">Store_Closure_Website (Version 1)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ICICLE-READTHEDOCS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Files</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/tapis-project/source/technical/files.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="files">
<span id="id1"></span><h1>Files<a class="headerlink" href="#files" title="Link to this heading"></a></h1>
<p>The files service is the central point of interaction for all file operations in the Tapis ecosystem.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Through the Files service users can perform file listing, uploading, and various operations such as move, copy, mkdir
and delete. The service also supports transferring files from one Tapis system to another.</p>
<p>Currently, the files service includes support for systems of type LINUX, S3, IRODS and GLOBUS.</p>
<p>Note that supported functionality varies by system type.</p>
<p>All file operations act upon Tapis <em>System</em> resources. <a class="footnote-reference brackets" href="#id7" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>
For more information on the Systems service please see <a class="reference external" href="https://tapis.readthedocs.io/en/latest/technical/systems.html">Systems</a></p>
</section>
<section id="basic-file-operations">
<h2>Basic File Operations<a class="headerlink" href="#basic-file-operations" title="Link to this heading"></a></h2>
<section id="listing">
<h3>Listing<a class="headerlink" href="#listing" title="Link to this heading"></a></h3>
<p>Tapis supports listing files or objects on a Tapis system. The type for items listed will depend on system type.
For example, for LINUX they will be posix files and for S3 they will be storage objects. See the next section below for
additional considerations for S3 type systems. On S3 systems, for example, the recurse flag is ignored and all objects
with keys matching the path as a prefix are always included.</p>
<p>For system types that support directory hierarchies the maximum recursion depth is 20.</p>
<p>To list the files in the effective <em>rootDir</em> directory of a Tapis system:</p>
<p>Using the official Tapis Python SDK:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">listFiles</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s2">&quot;my-tapis-system&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or using curl:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>https://tacc.tapis.io/v3/files/ops/my-system/
</pre></div>
</div>
<p>And to list a sub-directory in the system, just add the path to the request:</p>
<p>Using CURL</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>https://tacc.tapis.io/v3/files/ops/aturing-storage/subDir1/subDir2/subDir3/
</pre></div>
</div>
<p>Query Parameters</p>
<dl class="field-list simple">
<dt class="field-odd">limit<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer - Max number of results to return, default of 1000</p>
</dd>
<dt class="field-even">offset<span class="colon">:</span></dt>
<dd class="field-even"><p>integer - Skip the first N listings</p>
</dd>
</dl>
<p>The JSON response of the API will look something like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mimeType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1003&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1003&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;nativePermissions&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;drwxrwxr-x&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tapis://dev/aturing-storage/file1.txt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lastModified&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-04-29T16:55:57Z&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file1.txt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file1.txt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">313</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mimeType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1003&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1003&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;nativePermissions&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;-rw-rw-r--&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tapis://dev/aturing-storage/file2.txt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lastModified&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-12-17T22:46:29Z&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file2.txt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file2.txt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.1-84a31617&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="listings-and-s3-support">
<h4>Listings and S3 Support<a class="headerlink" href="#listings-and-s3-support" title="Link to this heading"></a></h4>
<p>File listings on S3 type systems have some special considerations. Objects in an S3 bucket do not have a hierarchical
structure. There are no directories. Everything is an object associated with a key.</p>
<p>One thing to note is that, as mentioned above, for S3 the recurse flag is ignored and all objects with keys matching
the path as a prefix are always included.</p>
<p>Note that for S3 this means that when the path is an empty string all objects in the bucket with a prefix matching
<em>rootDir</em> will be included. This is especially important to keep in mind when using the delete operation to remove
objects matching a path.</p>
<p>The attribute <em>rootDir</em> is optional for S3 type systems. When defined it will be prepended to all paths and the
resulting path will become the key.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <em>rootDir</em> is defined for an S3 system it typically should not begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>.
For S3 keys are typically created and manipulated using URLs and do not have a leading <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p>
</div>
</section>
<section id="handling-of-symbolic-links-on-linux-systems">
<h4>Handling of symbolic links on Linux systems<a class="headerlink" href="#handling-of-symbolic-links-on-linux-systems" title="Link to this heading"></a></h4>
<p>If listing contains a symbolic link, it will show type of symbolic link:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1002&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lastModified&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-05-09T19:53:53Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;mimeType&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;nativePermissions&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rwxrwxrwx&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1002&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;symbolic_link&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tapis://mysystem/mySymLinkedFileOrDirectory&quot;</span>
<span class="p">},</span>
</pre></div>
</div>
<p>If a listing for a path that is a symbolic link is requested, the symbolic link is followed, and the information is
returned for path that the symbolic link points to.  If the path doesn’t exist, and error will be returned.  If the
link points to a file, the file’s information will be returned (the type will be “file”).  If the symbolic link
points to a directory, the contents of that directory will be returned.</p>
</section>
</section>
<section id="move-and-copy">
<h3>Move and Copy<a class="headerlink" href="#move-and-copy" title="Link to this heading"></a></h3>
<p>To move or copy a file or directory using the files service, make a PUT request using the path to the current location
of the file or folder.</p>
<p>For example, to copy a file located at <cite>/file1.txt</cite> to <cite>/subdir/file1.txt</cite></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>-d<span class="w"> </span>@body.json<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/ops/aturing-storage/file1.txt&quot;</span>
</pre></div>
</div>
<p>with a JSON body of</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;COPY&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;newPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/subdir/file1.txt&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="id3">
<h4>Handling of symbolic links on Linux systems<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<p>During a move or copy, if a symbolic link is encountered, it will be handled as shown in the tables below.  The first and second columns indicate whether the link is the source or target and if it points to a file or directory.</p>
<p>Copy</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Symbolic Link</p></th>
<th class="head"><p>Points To</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>source</p></td>
<td><p>file</p></td>
<td><p>If the destination path is to a file (this means that the path ends in a component that does exist, and it’s a file or a
component that does not exist):</p>
<blockquote>
<div><ul class="simple">
<li><p>a new symbolic link is created that points to the same place as the source.</p></li>
<li><p>if the destination path includes directories that do not exist, they will be created.</p></li>
</ul>
</div></blockquote>
<p>If the destination path is to a directory (this means that the path ends in a component that does exist and it is a
directory):</p>
<blockquote>
<div><ul class="simple">
<li><p>If the path given is to an existing directory,  a new link with the same name will be created in that directory, and
it will point to the same place as the source.</p></li>
</ul>
</div></blockquote>
<p>Note that if the link is to a relative path, moving it could change where it actually points because the exact relative
path will remain the same.</p>
</td>
</tr>
<tr class="row-odd"><td><p>source</p></td>
<td><p>directory</p></td>
<td><p>If the destination path is to a file (this means that the path ends in a component that does exist, and it’s a file or a
component that does not exist):</p>
<blockquote>
<div><ul class="simple">
<li><p>a new symbolic link is created that points to the same place as the source.</p></li>
<li><p>if the destination path includes directories that do not exist, they will be created.</p></li>
</ul>
</div></blockquote>
<p>If the destination path is to a directory (this means that the path ends in a component that does exist and it is a
directory):</p>
<blockquote>
<div><ul class="simple">
<li><p>If the path given is to an existing directory,  a new link with the same name will be created in that directory, and
it will point to the same place as the source.</p></li>
</ul>
</div></blockquote>
<p>Note that if the link is to a relative path, moving it could change where it actually points because the exact relative
path will remain the same.</p>
</td>
</tr>
<tr class="row-even"><td><p>destination</p></td>
<td><p>file</p></td>
<td><p>The destination is replaced by the source.  The source could be a file, directory, or link to a file or directory.</p></td>
</tr>
<tr class="row-odd"><td><p>destination</p></td>
<td><p>directory</p></td>
<td><p>The new file, directory, or link is created inside of the existing directory.</p></td>
</tr>
</tbody>
</table>
<p>Move</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Symbolic Link</p></th>
<th class="head"><p>Points To</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>source</p></td>
<td><p>file</p></td>
<td><p>If the destination path is to a file (this means that the path ends in a component that does exist, and it’s a file or a
component that does not exist):</p>
<blockquote>
<div><ul class="simple">
<li><p>the symbolic link is renamed.</p></li>
<li><p>if the destination path includes directories that do not exist, they will be created, and the new link will be placed
there.</p></li>
</ul>
</div></blockquote>
<p>If the destination path is to a directory (this means that the path ends in a component that does exist and it is a
directory):</p>
<blockquote>
<div><ul class="simple">
<li><p>If the path given is to an existing directory,  the link is moved to that directory.</p></li>
</ul>
</div></blockquote>
<p>Note that if the link is to a relative path, moving it could change where it actually points because the exact relative
path will remain the same.</p>
</td>
</tr>
<tr class="row-odd"><td><p>source</p></td>
<td><p>directory</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>If the destination path is to a file (this means that the path ends in a component that does exist, and it’s a file or a
component that does not exist):</p>
<blockquote>
<div><ul class="simple">
<li><p>the symbolic link is renamed.</p></li>
<li><p>if the destination path includes directories that do not exist, they will be created.</p></li>
</ul>
</div></blockquote>
<p>If the destination path is to a directory (this means that the path ends in a component that does exist and it is a
directory):</p>
<blockquote>
<div><ul class="simple">
<li><p>if the path given is to an existing directory,  the souce link will be moved into that directory, and it will point to
the same place as the source.</p></li>
</ul>
</div></blockquote>
<p>Note that if the link is to a relative path, moving it could change where it actually points because the exact relative
path will remain the same.</p>
</td>
</tr>
<tr class="row-odd"><td><p>destination</p></td>
<td><p>file</p></td>
<td><p>The source link is renamed, to the destination path.  The destination is replaced.  The source could be a file, directory,
or link to a file or directory.</p></td>
</tr>
<tr class="row-even"><td><p>destination</p></td>
<td><p>directory</p></td>
<td><p>The file, directory, or link is moved inside of the existing directory.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="making-directories">
<h3>Making directories<a class="headerlink" href="#making-directories" title="Link to this heading"></a></h3>
<p>To create a directory on a tapis system at the given path, issue a mkdir request. This is not supported for all system types.
The mkdir operation is currently supported for LINUX, IRODS and GLOBUS type systems.</p>
<p>Using the Tapis Python SDK:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s2">&quot;my-system&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;/folderA/folderB/newDirectory&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://tacc.tapis.io/v3/files/ops/&lt;systemId&gt;<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-H<span class="w"> </span>Content-Type:application/json<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;path&quot;:&quot;&lt;directory_path&quot;}&#39;</span>
</pre></div>
</div>
</section>
<section id="uploading">
<h3>Uploading<a class="headerlink" href="#uploading" title="Link to this heading"></a></h3>
<p>To upload a file use a POST request. The file will be placed at the location specified in the <cite>{path}</cite> parameter
in the request. Not all system types support this operation.
For example, given the system <cite>my-system</cite>, to upload file <cite>someFile.txt</cite> to directory <cite>/folderA/folderB/folderC</cite>:</p>
<p>Using the official Tapis Python SDK:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">source_file_path</span><span class="o">=</span><span class="s2">&quot;experiment-results.hd5&quot;</span><span class="p">,</span> <span class="n">system_id</span><span class="o">=</span><span class="s2">&quot;my-system&quot;</span><span class="p">,</span> <span class="n">dest_file_path</span><span class="o">=</span><span class="s2">&quot;/folderA/folderB/folderC/someFile.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-F<span class="w"> </span><span class="s2">&quot;file=@someFile.txt&quot;</span><span class="w"> </span>https://tacc.tapis.io/v3/files/ops/my-system/folderA/folderB/folderC/someFile.txt
</pre></div>
</div>
<p>For some system types (such as LINUX) any folders that do not exist in the specified path will automatically be created.</p>
<p>Note that for an S3 system an object will be created with a key of <em>rootDir</em>/{path}.</p>
</section>
<section id="deleting">
<h3>Deleting<a class="headerlink" href="#deleting" title="Link to this heading"></a></h3>
<p>To delete a file or folder, issue a DELETE request for the path to be removed.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>DELETE<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/ops/aturing-storage/file1.txt&quot;</span>
</pre></div>
</div>
<p>The request above would delete <code class="code docutils literal notranslate"><span class="pre">file1.txt</span></code></p>
<p>For an S3 system, the path will represent either a single object or all objects in the bucket with a prefix matching
the system <em>rootDir</em> if the path is the empty string.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For an S3 system if the path is the empty string, then all objects in the bucket with a key matching
the prefix <em>rootDir</em> will be deleted. So if the <em>rootDir</em> is also the empty string, then all objects in the
bucket will be removed.</p>
</div>
<section id="handling-of-symbolic-links-and-special-files-on-linux-systems">
<h4>Handling of symbolic links and special files on Linux Systems<a class="headerlink" href="#handling-of-symbolic-links-and-special-files-on-linux-systems" title="Link to this heading"></a></h4>
<p>If Tapis encounters a symbolic link during a delete operation, the link will be deleted.  The file or directory that the link points to will be
unaffected.  If the delete encounters a special file (such as a device file or fifo, etc), it will not be deleted, and an error will be returned.
If this is in the middle of a recursive delete operation, some files may have been already deleted.</p>
</section>
</section>
<section id="creating-a-directory">
<h3>Creating a directory<a class="headerlink" href="#creating-a-directory" title="Link to this heading"></a></h3>
<p>To create a directory, use POST and provide the path to the new directory in the request body. Not all system types
support this operation.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-d<span class="w"> </span>@body.json<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://tacc.tapis.io/v3/files/ops/my-system
</pre></div>
</div>
<p>with a JSON body of</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;path/to/new/directory/&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="getting-linux-stat-information">
<h3>Getting Linux stat information<a class="headerlink" href="#getting-linux-stat-information" title="Link to this heading"></a></h3>
<p>Get native stat information for a file or directory for a system of type LINUX.</p>
<p>For example, for <cite>/subdir/file1.txt</cite></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/utils/linux/aturing-storage/subdir/file1.txt&quot;</span>
</pre></div>
</div>
</section>
<section id="running-a-linux-native-operation">
<h3>Running a Linux native operation<a class="headerlink" href="#running-a-linux-native-operation" title="Link to this heading"></a></h3>
<p>Run a native operation on a path. Operations are <em>chmod</em>, <em>chown</em> or <em>chgrp</em>. For a system of type LINUX.</p>
<p>For example, to change the owner of a file located at <cite>/file1.txt</cite> to <code class="code docutils literal notranslate"><span class="pre">aeinstein</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-d<span class="w"> </span>@body.json<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/utils/linux/aturing-storage/file1.txt&quot;</span>
</pre></div>
</div>
<p>with a JSON body of</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CHOWN&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;argument&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aeinstein&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="content">
<h2>Content<a class="headerlink" href="#content" title="Link to this heading"></a></h2>
<p>Get file or directory contents as a stream of data. Not supported for all system types.</p>
<section id="file-contents-serving-files">
<h3>File Contents - Serving files<a class="headerlink" href="#file-contents-serving-files" title="Link to this heading"></a></h3>
<p>To return the actual contents (raw bytes) of a file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>https://tacc.tapis.io/v3/files/content/my-system/image.jpg<span class="w"> </span>&gt;<span class="w"> </span>image.jpg
</pre></div>
</div>
<p>Query Parameters</p>
<dl class="field-list simple">
<dt class="field-odd">startByte<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer - Start at byte N of the file</p>
</dd>
<dt class="field-even">count<span class="colon">:</span></dt>
<dd class="field-even"><p>integer - Return this number of bytes after startByte</p>
</dd>
<dt class="field-odd">zip<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean - Zip the contents of a folder</p>
</dd>
</dl>
<p>Header Parameters</p>
<dl class="field-list simple">
<dt class="field-odd">more<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer - Return 1 KB chunks of UTF-8 encoded text from a file starting after page <em>more</em>. This call can be used to page through a text based file. Note that if the contents of the file are not textual (such as an image file or other binary format), the output will be bizarre.</p>
</dd>
</dl>
</section>
<section id="download-using-zip">
<h3>Download using ZIP<a class="headerlink" href="#download-using-zip" title="Link to this heading"></a></h3>
<p>The query parameter <em>zip</em> may be used to request a stream compressed using the ZIP file format. This is not allowed
if system <em>rootDir</em> plus <em>path</em> would result in all files on the host being included. Please download individual
directories, files or objects.</p>
<p>For example, on a linux system a directory may be downloaded as a compressed archive using a command  similar to the
following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>https://tacc.tapis.io/v3/files/content/my-linux-system/my_dir<span class="w"> </span>&gt;<span class="w"> </span>my_dir.zip
</pre></div>
</div>
<p>The program <em>unzip</em> may then be used to extract the contents.</p>
<p>If the path being downloaded is a single file and the contents are placed in a file ending in the extension <em>.gz</em> then
the <em>gunzip</em> utility may also be used to extract the contents.</p>
</section>
</section>
<section id="transfers">
<h2>Transfers<a class="headerlink" href="#transfers" title="Link to this heading"></a></h2>
<p>File transfers are used to move data between Tapis systems. They should be used for bulk data operations that are too
large for the REST api to perform. Transfers occur <em>asynchronously</em>, and are executed concurrently where possible to
increase performance. As such, the order in which the files are transferred is not deterministic.</p>
<p>When a transfer is initiated, a <em>bill of materials</em> is created that creates a record of all the files from the
<em>sourceUri</em> that are to be transferred to the <em>destinationUri</em>. Unless otherwise specified, all files in the
<em>bill of materials</em> must transfer successfully in order for the overall transfer to be considered successful.
A transfer task has an attribute named <em>status</em> which is updated as the transfer progresses.
The possible states for a transfer are:</p>
<dl class="simple">
<dt>ACCEPTED</dt><dd><p>The initial request has been processed and saved.</p>
</dd>
<dt>IN_PROGRESS</dt><dd><p>The bill of materials has been created and transfers are either in flight or waiting to begin.</p>
</dd>
<dt>FAILED</dt><dd><p>The transfer failed.</p>
</dd>
<dt>COMPLETED</dt><dd><p>The transfer completed successfully, all files have been transferred to the target system.</p>
</dd>
</dl>
<p>Unauthenticated HTTP endpoints are also possible to use as a source for transfers.
This method can be utilized to include outputs from other APIs into Tapis jobs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For transfers involving Globus, both the source and destination system must be of type GLOBUS.</p>
</div>
<p>The number of files included in the <em>bill of materials</em> will depend on the system types and the <em>sourceUri</em> values
provided in the transfer request. If the source system supports directories and <em>sourceUri</em> is a directory then
the directory will be processed recursively and all files will be added to the <em>bill of materials</em>. If the source
system is of type S3 then all objects matching the <em>sourceUri</em> path as a prefix will be included.</p>
<section id="system-types-and-supported-functionality">
<h3>System types and supported functionality<a class="headerlink" href="#system-types-and-supported-functionality" title="Link to this heading"></a></h3>
<p>As discussed above, the files included in a transfer will depend on the source system types and the <em>sourceUri</em> values
provided in the transfer request. Here is a summary of the behavior:</p>
<dl class="simple">
<dt><em>LINUX/IRODS to LINUX/IRODS</em></dt><dd><p>When the <em>sourceUri</em> is a directory a recursive listing is made and the files and directory structure are replicated
on the <em>destinationUri</em> system.</p>
</dd>
<dt><em>S3 to LINUX/IRODS</em></dt><dd><p>All objects matching the <em>sourceUri</em> path as a prefix will be created as files on the <em>destinationUri</em> system.</p>
</dd>
<dt><em>LINUX/IRODS to S3</em></dt><dd><p>When the <em>sourceUri</em> is a directory a recursive listing is made. For each entry in the listing the path relative to
the source system rootDir is mapped to a key for the S3 destination system. In other words, a recursive listing is
made for the directory on the <em>sourceUri</em> system and for each non-directory entry an object is created on the S3
<em>destinationUri</em> system.</p>
</dd>
<dt><em>S3 to S3</em></dt><dd><p>All objects matching the <em>sourceUri</em> path as a prefix will be re-created as objects on the <em>destinationUri</em> system.</p>
</dd>
<dt><em>HTTP/S to ANY</em></dt><dd><p>Transfer of a directory is not supported. Destination system may not be of type GLOBUS. The content of the object
from the <em>sourceUri</em> URL is used to create a single file or object on the <em>destinationUri</em> system.</p>
</dd>
<dt><em>ANY to HTTP/S</em></dt><dd><p>Transfers not supported. Tapis does not support the use of protocol http/s for the <em>destinationUri</em>.</p>
</dd>
</dl>
</section>
<section id="creating-transfers">
<h3>Creating Transfers<a class="headerlink" href="#creating-transfers" title="Link to this heading"></a></h3>
<p>Lets say our user <code class="code docutils literal notranslate"><span class="pre">aturing</span></code> needs to transfer data between two systems that are registered in tapis. The source system
has an id of <code class="code docutils literal notranslate"><span class="pre">aturing-storage</span></code> with the results of an experiment located in directory <code class="code docutils literal notranslate"><span class="pre">/experiments/experiment-1/</span></code>
that should be transferred to a system with id <code class="code docutils literal notranslate"><span class="pre">aturing-compute</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-d<span class="w"> </span>@body.json<span class="w"> </span>https://tacc.tapis.io/v3/files/tranfers
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;An optional identifier&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;elements&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;sourceUri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tapis://aturing-storage/experiments/experiment-1/&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destinationUri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tapis://aturing-compute/&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The request above will initiate a transfer that copies all files and folders in the <code class="code docutils literal notranslate"><span class="pre">experiment-1</span></code> folder on the source
system to the root directory of the destination system <code class="code docutils literal notranslate"><span class="pre">aturing-compute</span></code></p>
<section id="http-source">
<h4>HTTP Source<a class="headerlink" href="#http-source" title="Link to this heading"></a></h4>
<p>Unauthenticated HTTP/S endpoints can also be used as a source for a file transfer request.
This can be useful, for instance, when the inputs for a job are from a separate web service, or perhaps stored in a
public S3 bucket. Note that in this case the <em>sourceUri</em> does not refer to a Tapis system.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-d<span class="w"> </span>@body.json<span class="w"> </span>https://tacc.tapis.io/v3/files/tranfers
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;An optional identifier&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;elements&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;sourceUri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://some-web-application.io/calculations/12345/results.csv&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destinationUri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tapis://aturing-compute/inputs.csv&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The request above will place the output of the source URI into a file called  <code class="code docutils literal notranslate"><span class="pre">inputs.csv</span></code> in the
<code class="code docutils literal notranslate"><span class="pre">aturing-compute</span></code> system.</p>
</section>
</section>
<section id="getting-transfer-information">
<h3>Getting transfer information<a class="headerlink" href="#getting-transfer-information" title="Link to this heading"></a></h3>
<p>To retrieve information about a transfer including status and bytes transferred, simply make a GET request to the
transfers API with the UUID of the transfer.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w">  </span>https://tacc.tapis.io/v3/files/tranfers/<span class="o">{</span>UUID<span class="o">}</span>
</pre></div>
</div>
<p>The JSON response should look something like :</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aturing&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tenantId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tacc&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;some tag&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b2dcf71a-bb7b-409a-8c01-1bbs97e749fb&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;COMPLETED&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;parentTasks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tenantId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tacc&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aturing&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;sourceURI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tapis://sourceSystem/file1.txt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;destinationURI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tapis://destSystem/folderA/&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;totalBytes&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;bytesTransferred&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;taskId&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;children&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;errorMessage&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8fdccda6-a504-4ddf-9464-7b22sa66bcc4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;COMPLETED&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-04-22T14:21:58.933851Z&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;startTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-04-22T14:21:59.862356Z&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;endTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-04-22T14:22:09.389847Z&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;estimatedTotalBytes&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;totalBytesTransferred&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;totalTransfers&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completeTransfers&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;errorMessage&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-04-22T14:21:58.933851Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;startTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-04-22T14:21:59.838928Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;endTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-04-22T14:22:09.376740Z&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.1-094fd38d&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3>Handling of symbolic links on Linux Systems<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<p>Transfer will always “follow links”.  If the source of the transfer is a symbolic link to a file or directory, it transfer the file or
directory that is pointed to.  If it doesn’t exist, it will be an error (i.e. the link points to something that doesn’t exist).  In
the case of a directory transfer where one of the entries in the directory encountered is a symbolic link it will be resolved in
exactly the same way - the file is added to the archive to be downloaded, or the directory is walked, and it’s content added to the
archive.  Symbolic links can create situations where infinite recursion can occur - for example, suppose you have a directory with a
link that points to “../”.  That means that each time it’s expanded the current directory will be added, and the link will be
expanded again.  Transfers (and really all file operations that involve recursing subdirectories) are limited by a recursion depth.
The current maximum depth is 20.</p>
</section>
</section>
<section id="support-for-globus">
<h2>Support for Globus<a class="headerlink" href="#support-for-globus" title="Link to this heading"></a></h2>
<p>Please note that your Tapis site installation must have been configured by the site administrator to support
Globus. Please see <a class="reference external" href="https://tapis.readthedocs.io/en/latest/deployment/deployer.html#configuring-support-for-globus">Globus_Config</a>.</p>
<p>The integration of Globus and Tapis allows users to configure and use Globus endpoints and
collections just as they would other types of storage systems defined in Tapis. As mentioned previously, not all operations
are supported for all system types. For systems of type GLOBUS, the following operations are supported:</p>
<ul class="simple">
<li><p>listing</p></li>
<li><p>mkdir</p></li>
<li><p>move</p></li>
<li><p>delete</p></li>
<li><p>transfer between GLOBUS systems</p></li>
</ul>
<p>For more information on setting up and registering credentials for a system of type GLOBUS,
please see <a class="reference external" href="https://tapis.readthedocs.io/en/latest/technical/systems.html#registering-credentials-for-a-globus-system#">Systems_Globus</a>.</p>
</section>
<section id="file-permissions">
<h2>File Permissions<a class="headerlink" href="#file-permissions" title="Link to this heading"></a></h2>
<p>The permissions model allows for fine grained access control of paths on a Tapis system. The system owner
may grant READ and MODIFY permission to specific users. MODIFY implies READ.</p>
<p>Please note that Tapis permissions are independent of native permissions enforced by the underlying system host.</p>
<section id="getting-permissions">
<h3>Getting permissions<a class="headerlink" href="#getting-permissions" title="Link to this heading"></a></h3>
<p>Get the Tapis permissions for a user for the system and path. If no user specified then permissions are retrieved for
the user making the request.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>https://tacc.tapis.io/v3/files/perms/aturing-storage/experiment1?username<span class="o">=</span>aeinstein
</pre></div>
</div>
</section>
<section id="granting-permissions">
<h3>Granting permissions<a class="headerlink" href="#granting-permissions" title="Link to this heading"></a></h3>
<p>Lets say our user <code class="code docutils literal notranslate"><span class="pre">aturing</span></code> has a system with ID <code class="code docutils literal notranslate"><span class="pre">aturing-storage</span></code>. Alan wishes to allow his collaborator
<code class="code docutils literal notranslate"><span class="pre">aeinstein</span></code> to view the results of an experiment located at <code class="code docutils literal notranslate"><span class="pre">/experiment1</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-d<span class="w"> </span>@body.json<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://tacc.tapis.io/v3/files/perms/aturing-storage/experiment1/
</pre></div>
</div>
<p>with a JSON body with the following shape:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aeinstein&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;permission&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;READ&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Other users can also be granted permission to write to the system by granting the <code class="code docutils literal notranslate"><span class="pre">MODIFY</span></code> permission.
The JSON body would then be:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aeinstein&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;permission&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MODIFY&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="revoking-permissions">
<h3>Revoking permissions<a class="headerlink" href="#revoking-permissions" title="Link to this heading"></a></h3>
<p>Our user <code class="code docutils literal notranslate"><span class="pre">aturing</span></code> now wishes to revoke his former collaborators access to the folder above. He can
issue a DELETE request on the path and specify the username in order to revoke access:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>DELETE<span class="w"> </span>https://tacc.tapis.io/v3/files/perms/aturing-storage/experiment1?username<span class="o">=</span>aeinstein
</pre></div>
</div>
</section>
</section>
<section id="file-path-sharing">
<h2>File Path Sharing<a class="headerlink" href="#file-path-sharing" title="Link to this heading"></a></h2>
<p>In addition to fine grained permissions support, Tapis also supports a higher level approach to granting access.
This approach is known simply as <em>sharing</em>. The sharing API allows you to share a path with a set of users
as well as share publicly with all users in a tenant.
Sharing a path grants users READ access to the path or, in the context of running a job, it grants users READ
and MODIFY access to the path.</p>
<p>Please note that the underlying host associated with a system typically also has it’s own access controls.</p>
<section id="getting-share-information">
<h3>Getting share information<a class="headerlink" href="#getting-share-information" title="Link to this heading"></a></h3>
<p>Retrieve all sharing information for a path on a system. This includes all users with whom the path has been shared and
whether or not the path has been made publicly available.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>https://tacc.tapis.io/v3/files/share/aturing-storage/experiment1
</pre></div>
</div>
</section>
<section id="sharing-a-path-with-users">
<h3>Sharing a path with users<a class="headerlink" href="#sharing-a-path-with-users" title="Link to this heading"></a></h3>
<p>Create or update sharing information for a path on a system. The path will be shared with the list of users provided in
the request body. Requester must be owner of the system. For LINUX systems path sharing is hierarchical.
Sharing a path grants users READ access to the path or, in the context of running a job, it grants users READ
and MODIFY access to the path.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-d<span class="w"> </span>@body.json<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://tacc.tapis.io/v3/files/share/aturing-storage/experiment1/
</pre></div>
</div>
<p>with a JSON body with the following shape:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;users&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;aeinstein&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;rfeynman&quot;</span><span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="sharing-a-path-publicly">
<h3>Sharing a path publicly<a class="headerlink" href="#sharing-a-path-publicly" title="Link to this heading"></a></h3>
<p>Share a path on a system with all users in the tenant. Requester must be owner of the system.
Sharing a path grants users READ access to the path or, in the context of running a job, it grants users READ
and MODIFY access to the path.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://tacc.tapis.io/v3/files/share_public/aturing-storage/experiment1/
</pre></div>
</div>
</section>
<section id="unsharing-a-path-with-users">
<h3>Unsharing a path with users<a class="headerlink" href="#unsharing-a-path-with-users" title="Link to this heading"></a></h3>
<p>Update sharing information for a path on a system. The path will be unshared with the list of users provided in the
request body. Requester must be owner of the system.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-d<span class="w"> </span>@body.json<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://tacc.tapis.io/v3/files/unshare/aturing-storage/experiment1/
</pre></div>
</div>
<p>with a JSON body with the following shape:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;users&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;rfeynman&quot;</span><span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="unsharing-a-path-publicly">
<h3>Unsharing a path publicly<a class="headerlink" href="#unsharing-a-path-publicly" title="Link to this heading"></a></h3>
<p>Remove public sharing for a path on a system. Requester must be owner of the system.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://tacc.tapis.io/v3/files/unshare_public/aturing-storage/experiment1/
</pre></div>
</div>
</section>
<section id="removing-all-shares-for-a-path">
<h3>Removing all shares for a path<a class="headerlink" href="#removing-all-shares-for-a-path" title="Link to this heading"></a></h3>
<p>Remove all shares for a path on a system including public access.
If the path is a directory this will also be done for all sub-paths.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://tacc.tapis.io/v3/files/unshare_all/aturing-storage/experiment1/
</pre></div>
</div>
</section>
</section>
<section id="postits">
<h2>PostIts<a class="headerlink" href="#postits" title="Link to this heading"></a></h2>
<p>The PostIts service is a URL service that allows you to create pre-authenticated, disposable
URLs to files, directories, buckets, etc in the Tapis Platform’s Files service. You have
control over the lifetime and number of times the URL can be redeemed, and you can expire a
PostIt at any time. The most common use of PostIts is to create URLs to files so that you
can share with others without having to upload them to a third-party service.</p>
<section id="creating-postits">
<h3>Creating PostIts<a class="headerlink" href="#creating-postits" title="Link to this heading"></a></h3>
<p>To create a PostIt, send a POST request to the Files service’s Create PostIt endpoint.  The url
will contain the systemId and the path that will be shared.  The body of the post will contain
a json document which describes how long the PostIt is valid, and how many times it can be
redeemed.  There are default values for each of these parameters if they are not included.
If the number of times the PostIt may be redeemed (allowedUses) is set to -1, the PostIt may
be redeemed an unlimited number of times. The expiration (validSeconds) must always contain
a value.  If one is not provided, there is a default that is used.  The maximum value of
‘validSeconds’ is the maximum integer value in Java (Integer.MAX_VALUE = 2147483647).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The maximum value would result in a PostIt that would be valid for nearly 70 years,
however it is important to remember that the authentication and authorization are built
into the PostIt redeem url.  This means anyone who has the url could redeem it.  For
this reason, it’s advisable to keep the uses and expiration times to the minimum required.</p>
</div>
<p>Default parameters:</p>
<ul class="simple">
<li><p>allowedUses:  1 (One use)</p></li>
<li><p>validSeconds: 2592000 (30 days)</p></li>
</ul>
<p>APPLICATION/JSON examples</p>
<p>Creating a postit with the default expiration and uses on a system called “tapisv3-storage”
for the path “/myDirectory/myFile.txt”</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/tapisv3-storage/myDirectory/myFile.txt&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">createPostIt</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s2">&quot;tapisv3-storage&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;myDirectory/myFile.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Creating a postit supplying expiration (validSeconds 600) and uses (allowedUses 3) on a
system called “tapisv3-storage” for the path “/myDirectory/myFile.txt”</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/tapisv3-storage/myDirectory/myFile.txt&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;allowedUses&quot;: 3, &quot;validSeconds&quot;: 600}&#39;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">createPostIt</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s2">&quot;tapisv3-storage&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;myDirectory/myFile.txt&quot;</span><span class="p">,</span> <span class="n">allowedUses</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">validSeconds</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
<p>Creating a postit supplying allowing unlimited uses (allowedUses -1) and the default value
for expiration (default value for validSeconds is 30 days) on a system called
“tapisv3-storage” for the path “/myDirectory/myFile.txt”</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/tapisv3-storage/myDirectory/myFile.txt&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;allowedUses&quot;: -1}&#39;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">createPostIt</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s2">&quot;tapisv3-storage&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;myDirectory/myFile.txt&quot;</span><span class="p">,</span> <span class="n">allowedUses</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Example Postit Creation Response</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;status&quot;</span>:<span class="w"> </span><span class="s2">&quot;success&quot;</span>,
<span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;FAPI_POSTITS_OP_COMPLETE Operation completed. jwtTenant: tacc jwtUser: example_user OboTenant: tacc OboUser: examaple_user Operation: createPostIt System: tapisv3-storage Path: myDirectory/myFile.txt Id: e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span>,
<span class="w">  </span><span class="s2">&quot;result&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span>,
<span class="w">    </span><span class="s2">&quot;systemId&quot;</span>:<span class="w"> </span><span class="s2">&quot;tapisv3-storage&quot;</span>,
<span class="w">    </span><span class="s2">&quot;path&quot;</span>:<span class="w"> </span><span class="s2">&quot;myDirectory/myFile.txt&quot;</span>,
<span class="w">    </span><span class="s2">&quot;allowedUses&quot;</span>:<span class="w"> </span><span class="m">3</span>,
<span class="w">    </span><span class="s2">&quot;timesUsed&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<span class="w">    </span><span class="s2">&quot;jwtUser&quot;</span>:<span class="w"> </span><span class="s2">&quot;example_user&quot;</span>,
<span class="w">    </span><span class="s2">&quot;jwtTenantId&quot;</span>:<span class="w"> </span><span class="s2">&quot;tacc&quot;</span>,
<span class="w">    </span><span class="s2">&quot;owner&quot;</span>:<span class="w"> </span><span class="s2">&quot;example_user&quot;</span>,
<span class="w">    </span><span class="s2">&quot;tenantId&quot;</span>:<span class="w"> </span><span class="s2">&quot;tacc&quot;</span>,
<span class="w">    </span><span class="s2">&quot;redeemUrl&quot;</span>:<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/redeem/e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span>,
<span class="w">    </span><span class="s2">&quot;expiration&quot;</span>:<span class="w"> </span><span class="s2">&quot;2023-03-08T15:37:28.533641Z&quot;</span>,
<span class="w">    </span><span class="s2">&quot;created&quot;</span>:<span class="w"> </span><span class="s2">&quot;2023-03-08T15:27:28.534250Z&quot;</span>,
<span class="w">    </span><span class="s2">&quot;updated&quot;</span>:<span class="w"> </span><span class="s2">&quot;2023-03-08T15:27:28.534250Z&quot;</span>
<span class="w">  </span><span class="o">}</span>,
<span class="w">  </span><span class="s2">&quot;version&quot;</span>:<span class="w"> </span><span class="s2">&quot;1.3.1&quot;</span>,
<span class="w">  </span><span class="s2">&quot;commit&quot;</span>:<span class="w"> </span><span class="s2">&quot;0c13ee3c&quot;</span>,
<span class="w">  </span><span class="s2">&quot;build&quot;</span>:<span class="w"> </span><span class="s2">&quot;2023-03-07T21:56:41Z\n&quot;</span>,
<span class="w">  </span><span class="s2">&quot;metadata&quot;</span>:<span class="w"> </span><span class="o">{}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The PostIt returned by the create will contain the redeemUrl.  This url may be used to download the
content pointed to by the PostIt.  No Authentication will be done during this call.  The credentials
used to access this content will be the credentials of the PostIt owner.  If the owner’s permissions
change between creating the PostIt and redeeming the PostIt so that the owner is no longer allowed
to read the content, redeeming the PostIt will fail.</p>
</div>
<section id="create-postit-parameters">
<h4>Create PostIt parameters<a class="headerlink" href="#create-postit-parameters" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Location</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>systemId</p></td>
<td><p>String</p></td>
<td><p>url</p></td>
<td><p>&lt;none&gt;</p></td>
<td><p>The systemId of the system containing the path to create
the PostIt for.</p></td>
</tr>
<tr class="row-odd"><td><p>path</p></td>
<td><p>String</p></td>
<td><p>url</p></td>
<td><p>&lt;none&gt;</p></td>
<td><p>The path to create the PostIt for.</p></td>
</tr>
<tr class="row-even"><td><p>allowedUses</p></td>
<td><p>integer</p></td>
<td><p>body</p></td>
<td><p>1</p></td>
<td><p>The number of times a postit can be redeemed. Valid  values
are 1 - 2147483647, or -1 for unlimited uses.</p></td>
</tr>
<tr class="row-odd"><td><p>validSeconds</p></td>
<td><p>integer</p></td>
<td><p>body</p></td>
<td><p>2147483647</p></td>
<td><p>The number of seconds from creation that the PostIt will be
redeemable.  An expiration time is computed by adding this
value to the current date and time.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="listing-postits">
<h3>Listing PostIts<a class="headerlink" href="#listing-postits" title="Link to this heading"></a></h3>
<p>PostIts can be listed by authenticated users.  By default a listing of all PostIts owned by the authenticated
user will be returned.</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">listPostIts</span><span class="p">()</span>
</pre></div>
</div>
<p>To list all PostIts that are visible to the authenticated user, supply the query parameter
listType and set it’s value to ALL.  Typically users will only be able to see PostIts that
they own, however tenant admins will be allowed to see all PostIts in their tenant.</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits?listType=ALL&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">listPostIts</span><span class="p">(</span><span class="n">listType</span><span class="o">=</span><span class="s2">&quot;ALL&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Paging is handled by the query parameters limit, skip, and startAfter.  By default 100
PostIts are returned, however this can be changed by setting the query parameter “limit”.
Skip is used to determine how many PostIts to skip.  For example to get the second page
of a list of PostIts containing 10 items per page, you would need to set the limit to
10 (10 items per page), and set skip to 10 (skip the first page).  It’s probably a good
practice to set orderBy also, so that the list is ordered in the same way each time.
You could for example set orderBy to id.</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits?listType=ALL&amp;limit=10&amp;skip=10&amp;orderBy=id&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">listPostIts</span><span class="p">(</span><span class="n">listType</span><span class="o">=</span><span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">orderBy</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using startAfter is similar to using skip.  When using startAfter, you must provide a
PostIt id, and the list will start immediately after that PostIt.  You <strong>must</strong> provide
the orderBy parameter.  You may not use skip and startAfter together.</p>
<p>To control which fields are returned, you can supply the select query parameter, and
select only certain fields.  Setting the select query parameter to id, redeemUrl and
expiration would return only those fields (select=id,redeemUrl,expiration).  Setting
“select” to allAttributes will return all attributes, and setting “select” to
summaryAttributes will only return a preset collection of attributes.  The default
is summaryAttributes.  You can also set the value to summaryAttributes with additional
attributes (select=summaryAttributes,updated).</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits?listType=ALL&amp;select=id,redeemUrl,expiration&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">listPostIts</span><span class="p">(</span><span class="n">listType</span><span class="o">=</span><span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;id,redeemUrl,expiration&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="retrieving-a-single-postit">
<h3>Retrieving a Single PostIt<a class="headerlink" href="#retrieving-a-single-postit" title="Link to this heading"></a></h3>
<p>Retrieving a single PostIt can be done by issuing a GET request containing the id of the PostIt.  This
is <strong>not</strong> the same as redeeming, and does not add to the redeem count.  This will allow the owner of
the PostIt or a tenant admin to view the PostIt.  This could be used to see the number of times it’s
been retrieved, total number of uses allowed, expiration date, etc.</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">getPostIt</span><span class="p">(</span><span class="n">postitId</span><span class="o">=</span><span class="s2">&quot;e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For tenant admins, any PostIts in the tenant can be retreived in this way.  For other users only PostIts that
are owned by that user may be retreived, since access to the redeem url allows redemption of the PostIt.</p>
</section>
<section id="updating-postits">
<span id="id5"></span><h3>Updating PostIts<a class="headerlink" href="#updating-postits" title="Link to this heading"></a></h3>
<p>The creator of a PostIt and tenant admins can update a PostIt.  When updating a PostIt, the id of the posted
is sent as part of the url, and a body containing allowedUses and/or validSeconds can be specified.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The validSeconds parameter will add to the date and time as of the update request to compute the new
expiration.  It does <strong>not</strong> extend the current expiration by that many seconds.</p>
</div>
<p>If you need to update the url, you will need to delete or expire this PostIt and create
a new one.</p>
<p>Update a PostIt to allow for 10 uses and to expire in 1 hour</p>
<p>Using curl / PATCH</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{ &quot;allowedUses&quot;:10, &quot;validSeconds&quot;:3600 }&#39;</span>
</pre></div>
</div>
<p>Using curl / POST</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{ &quot;allowedUses&quot;:10, &quot;validSeconds&quot;:3600 }&#39;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">updatePostIt</span><span class="p">(</span><span class="n">postitId</span><span class="o">=</span><span class="s2">&quot;e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="p">,</span> <span class="n">allowedUses</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">validSeconds</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="redeeming-postits">
<h3>Redeeming PostIts<a class="headerlink" href="#redeeming-postits" title="Link to this heading"></a></h3>
<p>To redeem a PostIt, use the redeemUrl from the PostIt to make a non-authenticated HTTP GET request.</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-JO<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/redeem/e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The options -J and -O (specified above as -JO) tell curl to download the file content and use the
filename in the content-disposition header.  It’s worth noting that using this filename is not
entirely without risk as it could overwrite a file of the same name. If you would prefer to use
a name that you specify, you could replace -JO with --output filename</p>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">redeemPostIt</span><span class="p">(</span><span class="n">postitId</span><span class="o">=</span><span class="s2">&quot;e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>By default if the PostIt you are redeeming points to a path that is a directory, you will get a
zip file, and if it’s a regular file, you will get an uncompressed file.  If you want to force
a file to be compressed, you can specify the query parameter zip and set it to true.</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-JO<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/redeem/e614ce8e-447c-4195-a3f7-55f5dec5d243-010?zip=true&quot;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">redeemPostIt</span><span class="p">(</span><span class="n">postitId</span><span class="o">=</span><span class="s2">&quot;e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="p">,</span> <span class="nb">zip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you specify zip=false for a PostIt that points to a directory, you will get an error.  Directories
can’t be returned unless they are compressed.</p>
</div>
<p>The redeem URL can also be pasted into the address bar of your favorite browser, and it will download
the file pointed to by the PostIt.</p>
<section id="id6">
<h4>Handling of symbolic links on Linux Systems<a class="headerlink" href="#id6" title="Link to this heading"></a></h4>
<p>Redeeming PostIts handles symbolic links exactly the same as <a class="reference internal" href="#transfers">Transfers</a></p>
</section>
</section>
<section id="expiring-postits">
<h3>Expiring PostIts<a class="headerlink" href="#expiring-postits" title="Link to this heading"></a></h3>
<p>There is no special endpoint for expiring a PostIt.  To Expire a PostIt just update see
<a class="reference internal" href="#updating-postits"><span class="std std-ref">Updating PostIts</span></a> and set validSeconds to 0, or allowedUses to 0.</p>
</section>
<section id="deleting-postits">
<h3>Deleting PostIts<a class="headerlink" href="#deleting-postits" title="Link to this heading"></a></h3>
<p>PostIts can be deleted by specifying the PostIt id in the url.  This is a hard delete, and
cannot be undone.  Only an owner or tenant admin can delete a PostIt.</p>
<p>Using curl</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>DELETE<span class="w"> </span><span class="s2">&quot;https://tacc.tapis.io/v3/files/postits/e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Tapis-Token: </span><span class="nv">$JWT</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Using python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tapis</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">deletePostIt</span><span class="p">(</span><span class="n">postitId</span><span class="o">=</span><span class="s2">&quot;e614ce8e-447c-4195-a3f7-55f5dec5d243-010&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id7" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p>With the exception of the <em>sourceUri</em> in a transfer request when the protocol is <em>http</em> or <em>https</em>.</p>
</aside>
</aside>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ICICLE.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>