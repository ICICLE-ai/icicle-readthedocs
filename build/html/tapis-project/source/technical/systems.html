<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Systems &mdash; ICICLE-READTHEDOCS  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            ICICLE-READTHEDOCS
              <img src="https://aiinstitutes.org/wp-content/uploads/2022/07/icicle.jpeg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">AI for CI-for-AI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/ICICLE_Foodshed_Parser.html">Constrained Language Models Yield Few-Shot Semantic Parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/PPOD_CA.html">PPOD_CA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Region2vec.html">Region2vec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Species-Classification-Multimodal-Context.html">Species Classification using Multimodal Heterogeneous Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Species-Classification-Multimodal-Context.html#acknowledgements">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Store_Closure_Website.html">Store_Closure_Website (Version 1)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ICICLE-READTHEDOCS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Systems</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/tapis-project/source/technical/systems.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="systems">
<span id="id1"></span><h1>Systems<a class="headerlink" href="#systems" title="Link to this heading"></a></h1>
<p>Once you are authorized to make calls to the various services, one of first things you may want to do is view
storage and execution resources available to you or create your own. In Tapis a storage or execution resource
is referred to as a <strong>system</strong>.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>A Tapis system represents a server or collection of servers exposed through a single host name or IP address.
Each system is associated with a specific tenant. A system can be used for the following purposes:</p>
<ul class="simple">
<li><p>Running a job, including:</p>
<ul>
<li><p>Staging files to a system in preparation for running a job.</p></li>
<li><p>Executing a job on a system.</p></li>
<li><p>Archiving files and data on a remote system after job execution.</p></li>
</ul>
</li>
<li><p>Storing and retrieving files and data.</p></li>
</ul>
<p>Each system is of a specific type (such as LINUX or S3) and owned by a specific user who has special
privileges for the system. The system definition also includes the user that is used to access the system,
referred to as <em>effectiveUserId</em>. This access user can be a specific user (such as a service account) or dynamically
specified as <code class="docutils literal notranslate"><span class="pre">${apiUserId}</span></code>. For the case of <code class="docutils literal notranslate"><span class="pre">${apiUserId}</span></code>, the username is extracted from the identity
associated with the request to the service.</p>
</section>
<section id="model">
<h2>Model<a class="headerlink" href="#model" title="Link to this heading"></a></h2>
<p>At a high level a system represents the following information:</p>
<dl class="simple">
<dt><em>id</em></dt><dd><p>A short descriptive name for the system that is unique within the tenant.</p>
</dd>
<dt><em>description</em></dt><dd><p>An optional more verbose description for the system.</p>
</dd>
<dt><em>systemType</em> - Type of system</dt><dd><p>LINUX, S3, IRODS or GLOBUS</p>
</dd>
<dt><em>owner</em></dt><dd><p>A specific user set at system creation. By default this is the resolved value for <em>${apiUserId}</em>, the user making
the request to create the system.</p>
</dd>
<dt><em>host</em> - Host name, IP address or Globus ID</dt><dd><p>FQDN, IP address, Globus endpoint ID or Globus collection ID.</p>
</dd>
<dt><em>enabled</em> - Enabled flag</dt><dd><p>Indicates if system is currently considered active and available for use. By default this is <em>true</em>.</p>
</dd>
<dt><em>effectiveUserId</em> - Effective User</dt><dd><p>The username to use when accessing the system. A specific user (such as a service account) or the dynamic
user <code class="docutils literal notranslate"><span class="pre">${apiUserId}</span></code>.  By default this is <code class="docutils literal notranslate"><span class="pre">${apiUserId}</span></code>.</p>
</dd>
<dt><em>defaultAuthnMethod</em> - Default authentication method</dt><dd><p>How access authentication is handled by default. Authentication method can also be
specified as part of a request.
Supported methods: PASSWORD, PKI_KEYS, ACCESS_KEY, TOKEN.</p>
</dd>
<dt><em>bucketName</em> - Bucket name</dt><dd><p>For an S3 system this is the name of the bucket.</p>
</dd>
<dt><em>rootDir</em> - Effective root directory</dt><dd><p>Directory to be used when listing files or moving files to and from the system. For LINUX and IRODS this is required
and must begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>.
For S3 this is optional and typically will not begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>.
May not be updated. Contact support to request a change.</p>
</dd>
<dt><em>dtnSystemId</em> - DTN system Id</dt><dd><p>An alternate system to use as a Data Transfer Node (DTN) during job execution. The execution system and the DTN
system must have shared storage.</p>
</dd>
<dt><em>dtnMountPoint</em> - DTN mount point</dt><dd><p>Mount point (aka target) used when running the mount command on this system. During job execution this is the
path on this system for files transferred to <em>rootDir</em> on <em>dtnSystemId</em>.</p>
</dd>
<dt><em>dtnMountSourcePath</em> - DTN mount source path</dt><dd><p>The path exported by <em>dtnSystemId</em> that matches the <em>dtnMountPoint</em> on this system. This will be relative to
<em>rootDir</em> on <em>dtnSystemId</em>. Used during job execution.</p>
</dd>
<dt><em>isDtn</em></dt><dd><p>Indicates if system will be used as a data transfer node (DTN). If this is <em>true</em> then <em>rootDir</em> is required,
<em>canExec</em> must be false and following may not be specified: <em>dtnSystemId</em>, <em>dtnMountSourcePath</em>, <em>dtnMountPoint</em>
and all job execution related attributes. By default this is <em>false</em>.</p>
</dd>
<dt><em>canExec</em></dt><dd><p>Indicates if system can be used to execute jobs.</p>
</dd>
<dt><em>canRunBatch</em></dt><dd><p>Indicates if system supports running jobs using a batch scheduler. By default this is <em>false</em>.</p>
</dd>
<dt><em>enableCmdPrefix</em></dt><dd><p>Indicates if system allows a job submission request to specify a <em>cmdPrefix</em>. Since <em>cmdPrefix</em> is a free form
command it is a security concern. By default this is <em>false</em>.</p>
</dd>
<dt>Job related attributes</dt><dd><p>Various attributes related to job execution such as <em>jobRuntimes</em>, <em>jobWorkingDir</em>,
<em>batchScheduler</em>, <em>batchLogicalQueues</em></p>
</dd>
</dl>
<p>When creating a system the required attributes are: <em>id</em>, <em>systemType</em>, <em>host</em>, <em>defaultAuthnMethod</em> and <em>canExec</em>.
Depending on the type of system and specific values for certain attributes there are other requirements.</p>
<p>Note that a system may be created as a storage-only resource (<em>canExec=false</em>) or as a system that can be used for both
execution and storage (<em>canExec=true</em>).</p>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h2>
<p>Before going into further details about Systems, here we give some examples of how to create and view systems.
In the examples below we assume you are using the TACC tenant with a base URL of <code class="docutils literal notranslate"><span class="pre">tacc.tapis.io</span></code> and that you have
authenticated using PySDK or obtained an authorization token and stored it in the environment variable JWT,
or perhaps both.</p>
<section id="creating-a-system">
<h3>Creating a System<a class="headerlink" href="#creating-a-system" title="Link to this heading"></a></h3>
<p>Create a local file named <code class="docutils literal notranslate"><span class="pre">system_example.json</span></code> with json similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;tacc-sample-&lt;userid&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;My storage system&quot;</span><span class="p">,</span>
  <span class="s2">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;tapis-vm.tacc.utexas.edu&quot;</span><span class="p">,</span>
  <span class="s2">&quot;systemType&quot;</span><span class="p">:</span><span class="s2">&quot;LINUX&quot;</span><span class="p">,</span>
  <span class="s2">&quot;defaultAuthnMethod&quot;</span><span class="p">:</span><span class="s2">&quot;PKI_KEYS&quot;</span><span class="p">,</span>
  <span class="s2">&quot;effectiveUserId&quot;</span><span class="p">:</span><span class="s2">&quot;$</span><span class="si">{apiUserId}</span><span class="s2">&quot;</span><span class="p">,</span>
  <span class="s2">&quot;rootDir&quot;</span><span class="p">:</span><span class="s2">&quot;/&quot;</span><span class="p">,</span>
  <span class="s2">&quot;canExec&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where <em>&lt;userid&gt;</em> is replaced with your username, and your host name is updated appropriately. Note that although
credentials may be included in the definition we have not done so here. For security reasons, it is recommended that
login credentials be updated using a separate API call as discussed below.</p>
<p>Using PySDK:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">tapipy.tapis</span> <span class="kn">import</span> <span class="n">Tapis</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tapis</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://tacc.tapis.io&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;&lt;userid&gt;&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;************&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;system_example.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">openfile</span><span class="p">:</span>
    <span class="n">my_storage_system</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">openfile</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">createSystem</span><span class="p">(</span><span class="o">**</span><span class="n">my_storage_system</span><span class="p">)</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems -d @system_example.json
</pre></div>
</div>
</section>
<section id="registering-credentials-for-a-system">
<h3>Registering Credentials for a System<a class="headerlink" href="#registering-credentials-for-a-system" title="Link to this heading"></a></h3>
<p>Now that you have registered a system you will need to register credentials so you can use Tapis to access the host.
Various authentication methods can be used to access a system, such as PASSWORD, PKI_KEYS and TOKEN. Note that the
TOKEN authentication method is for systems of type GLOBUS. Registering credentials for a GLOBUS type system is a special
case that involves steps different from those described in this section. Please see the section below on
<a class="reference internal" href="#registering-credentials-for-a-globus-system">Registering Credentials for a Globus System</a> for more information.</p>
<p>Here we will cover registering PKI_KEYS (i.e. ssh keys) as an example.</p>
<p>Create a local file named <code class="docutils literal notranslate"><span class="pre">cred_tmp.json</span></code> with json similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;publicKey&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;ssh_public_key&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;privateKey&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;ssh_private_key&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where <em>&lt;ssh_public_key&gt;</em> and <em>&lt;ssh_private_key&gt;</em> are replaced with your keys. The keys must be encoded on a single line
with embedded newline characters. You may find the following linux command useful in converting a multi-line private
key into a single line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cat $privateKeyFile | awk -v ORS=&#39;\\n&#39; &#39;1&#39;
</pre></div>
</div>
<p>Using PySDK:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">createUserCredential</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s1">&#39;tacc-sample-&lt;userid&gt;&#39;</span><span class="p">,</span> <span class="n">userName</span><span class="o">=</span><span class="s1">&#39;&lt;userid&gt;&#39;</span><span class="p">,</span> <span class="n">publicKey</span><span class="o">=</span><span class="s1">&#39;&lt;ssh_public_key&gt;&#39;</span><span class="p">,</span> <span class="n">privateKey</span><span class="o">=</span><span class="s1">&#39;&lt;ssh_private_key&gt;&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems/credential/tacc-sample-&lt;userid&gt;/user/&lt;userid&gt; -d @cred_tmp.json
</pre></div>
</div>
<p>An optional attribute <em>loginUser</em> may be included in the request body in order to map the Tapis user to a username to
be used when accessing the system. If the login user is not provided then there is no mapping and the Tapis user is
always used when accessing the system. When a <em>loginUser</em> is provided the json would be similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;publicKey&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;ssh_public_key&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;privateKey&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;ssh_private_key&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;loginUser&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;linux_host_username&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that credentials are stored in the Security Kernel.
Only specific Tapis services are authorized to retrieve credentials.</p>
<section id="use-of-pki-keys-as-credentials">
<h4>Use of PKI_KEYS as credentials<a class="headerlink" href="#use-of-pki-keys-as-credentials" title="Link to this heading"></a></h4>
<p>When using an ssh keypair as credentials there are several important points to keep in mind. As discussed above, the
public key and private key must be encoded on a single line. This can sometimes be challenging. For example, copying
and pasting may convert newline characters in a way that is not compatible with processing in Tapis. You may find the
following linux command useful in converting a multi-line private key into a single line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cat $privateKeyFile | awk -v ORS=&#39;\\n&#39; &#39;1&#39;
</pre></div>
</div>
<p>Also, Tapis does not currently support OPENSSH type keys. After generating the keypair, please inspect the first few
lines of the private key file and confirm that it is not of type OPENSSH. Typically, a valid private key file will
start with the line <code class="docutils literal notranslate"><span class="pre">-----BEGIN</span> <span class="pre">RSA</span> <span class="pre">PRIVATE</span> <span class="pre">KEY-----</span></code>.
If your private key is of type OPENSSH please use a command similar to the following to generate your keypair:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span> <span class="o">-</span><span class="n">t</span> <span class="n">rsa</span> <span class="o">-</span><span class="n">b</span> <span class="mi">4096</span> <span class="o">-</span><span class="n">m</span> <span class="n">PEM</span>
</pre></div>
</div>
<p>When generating the keypair, do not use a passphrase. This can interfere with non-interactive use of the keypair.</p>
<p>Finally, please be aware that if the host has multi-factor authentication (MFA) enabled this may prevent Tapis from
communicating with the host. Tapis does not currently support MFA.</p>
<p>When encountering problems here are some suggestions on what to check:</p>
<ul class="simple">
<li><p>Public and private keys are each on one line in the json file. Newline characters in private key are properly encoded.</p></li>
<li><p>Keypair is not of type OPENSSH</p></li>
<li><p>Keypair does not have a passphrase</p></li>
<li><p>Public key has been added to the authorized_keys file for the target user. File ~/.ssh/authorized_keys</p></li>
<li><p>File ~/.ssh/authorized_keys has proper permissions.</p></li>
<li><p>MFA is not enabled for the target host.</p></li>
</ul>
<p>If problems persist you can also attempt to manually validate the keypair using a command similar to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">my_private_key</span> <span class="n">testuser</span><span class="nd">@myhost</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>where /tmp/my_private_key contains the original multi-line private key. If everything is set up correctly and the
keypair is valid you should be logged into the host without being prompted for a password.</p>
</section>
</section>
<section id="registering-credentials-for-a-globus-system">
<h3>Registering Credentials for a Globus System<a class="headerlink" href="#registering-credentials-for-a-globus-system" title="Link to this heading"></a></h3>
<p>Registering credentials for a GLOBUS type system is a special case that involves steps different from those described in
the section above. For a GLOBUS type system, the user will need to use the TOKEN authentication method and generate
an <code class="docutils literal notranslate"><span class="pre">accessToken</span></code> and <code class="docutils literal notranslate"><span class="pre">refreshToken</span></code> using two special-purpose System service endpoints.</p>
<p>Please note that your Tapis site installation must have been configured by the site administrator to support
Globus. Please see <a class="reference external" href="https://tapis.readthedocs.io/en/latest/deployment/deployer.html#configuring-support-for-globus">Globus_Config</a>.</p>
<section id="obtain-globus-authorization-code">
<h4>Obtain Globus Authorization Code<a class="headerlink" href="#obtain-globus-authorization-code" title="Link to this heading"></a></h4>
<p>The first step in generating Globus credentials is for the user to call the systems <em>authUrl</em> credential endpoint
to obtain a Globus authorization code.</p>
<p>Using CURL, the request would look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$curl -H &quot;X-Tapis-Token: $JWT&quot; https://dev.tapis.io/v3/systems/credential/globus/authUrl
</pre></div>
</div>
<p>The response should look similar to the following. Note that for brevity and readability, only the result portion of the
response is shown, the response has been split into multiple lines and various IDs are not filled in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://auth.globus.org/v2/oauth2/authorize?client_id=&lt;client_id&gt;</span>
      <span class="o">&amp;</span><span class="n">redirect_uri</span><span class="o">=</span><span class="n">https</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">2</span><span class="n">F</span><span class="o">%</span><span class="mi">2</span><span class="n">Fauth</span><span class="o">.</span><span class="n">globus</span><span class="o">.</span><span class="n">org</span><span class="o">%</span><span class="mi">2</span><span class="n">Fv2</span><span class="o">%</span><span class="mi">2</span><span class="n">Fweb</span><span class="o">%</span><span class="mi">2</span><span class="n">Fauth</span><span class="o">-</span><span class="n">code</span>
      <span class="o">&amp;</span><span class="n">scope</span><span class="o">=</span><span class="n">openid</span><span class="o">+</span><span class="n">profile</span><span class="o">+</span><span class="n">email</span><span class="o">+</span><span class="n">urn</span><span class="o">%</span><span class="mi">3</span><span class="n">Aglobus</span><span class="o">%</span><span class="mi">3</span><span class="n">Aauth</span><span class="o">%</span><span class="mi">3</span><span class="n">Ascope</span><span class="o">%</span><span class="mi">3</span><span class="n">Atransfer</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">globus</span><span class="o">.</span><span class="n">org</span><span class="o">%</span><span class="mi">3</span><span class="n">Aall</span>
      <span class="o">&amp;</span><span class="n">state</span><span class="o">=</span><span class="n">_default</span><span class="o">&amp;</span><span class="n">response_type</span><span class="o">=</span><span class="n">code</span><span class="o">&amp;</span><span class="n">code_challenge</span><span class="o">=&lt;</span><span class="n">challenge_id</span><span class="o">&gt;</span>
      <span class="o">&amp;</span><span class="n">code_challenge_method</span><span class="o">=</span><span class="n">S256</span><span class="o">&amp;</span><span class="n">access_type</span><span class="o">=</span><span class="n">offline</span><span class="s2">&quot;,</span>
  <span class="s2">&quot;sessionId&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;session_id&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The user should copy the url (as a single string, no line breaks) and make note of the session Id for later use.
The user then visits the provided URL and is presented with a Globus logon page that will allow them
to authenticate using one of thousands of supported identity providers, including through their existing organization
using CILogon.</p>
<p>The user must use the following flow to obtain an authorization code:</p>
<ol class="arabic simple">
<li><p>Visit the provided URL and authenticate through Globus. After authentication, user is re-directed back to a
Globus page showing the access being requested by Tapis.</p></li>
<li><p>Fill in a label for future reference and click <em>Allow</em> to authorize Tapis to access Globus on their behalf.</p></li>
<li><p>Copy the provided authorization code in preparation for the final step. Note that the code is valid for a short time
(as of this writing it is valid for 10 minutes).</p></li>
</ol>
</section>
<section id="exchange-authorization-code-for-tokens">
<h4>Exchange Authorization Code for Tokens<a class="headerlink" href="#exchange-authorization-code-for-tokens" title="Link to this heading"></a></h4>
<p>The final step is for the user to call the systems credential endpoint to exchange the authorization code and session ID
for tokens which are stored by the Systems service in a credentials record.</p>
<p>Using CURL, the request would look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot;
       https://dev.tapis.io/v3/systems/credential/&lt;system&gt;/user/&lt;user&gt;/globus/tokens/&lt;authCode&gt;/&lt;sessionId&gt;
</pre></div>
</div>
<p>The response should look similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;SYSAPI_CRED_UPDATED Credential updated. ...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.3.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;commit&quot;</span><span class="p">:</span> <span class="s2">&quot;619aa7ce&quot;</span><span class="p">,</span>
  <span class="s2">&quot;build&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-04-02T19:06:38Z&quot;</span><span class="p">,</span>
  <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div>
</div>
<p>At this point the user will have registered credentials for a Tapis system that can be used as a source or destination
for Globus operations.</p>
</section>
</section>
<section id="viewing-systems">
<h3>Viewing Systems<a class="headerlink" href="#viewing-systems" title="Link to this heading"></a></h3>
<section id="retrieving-details-for-a-system">
<h4>Retrieving details for a system<a class="headerlink" href="#retrieving-details-for-a-system" title="Link to this heading"></a></h4>
<p>To retrieve details for a specific system, such as the one above:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the section below on <a class="reference internal" href="#selecting">Selecting</a> to find out how to control the amount of information returned.</p>
</div>
<p>Using PySDK:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">getSystem</span><span class="p">(</span><span class="n">systemId</span><span class="o">=</span><span class="s1">&#39;tacc-sample-&lt;userid&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems/tacc-sample-&lt;userid&gt;
</pre></div>
</div>
<p>The response should look similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;tenant&quot;</span><span class="p">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span>
       <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;tacc-sample-&lt;userid&gt;&quot;</span><span class="p">,</span>
       <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;My storage system&quot;</span><span class="p">,</span>
       <span class="s2">&quot;systemType&quot;</span><span class="p">:</span> <span class="s2">&quot;LINUX&quot;</span><span class="p">,</span>
       <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;userid&gt;&quot;</span><span class="p">,</span>
       <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;tapis-vm.tacc.utexas.edu&quot;</span><span class="p">,</span>
       <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
       <span class="s2">&quot;effectiveUserId&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;userid&gt;&quot;</span><span class="p">,</span>
       <span class="s2">&quot;defaultAuthnMethod&quot;</span><span class="p">:</span> <span class="s2">&quot;PKI_KEYS&quot;</span><span class="p">,</span>
       <span class="s2">&quot;authnCredential&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;rootDir&quot;</span><span class="p">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
       <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
       <span class="s2">&quot;useProxy&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
       <span class="s2">&quot;proxyHost&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
       <span class="s2">&quot;proxyPort&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
       <span class="s2">&quot;dtnSystemId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;dtnMountPoint&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;dtnMountSourcePath&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;isDtn&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
       <span class="s2">&quot;canExec&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
       <span class="s2">&quot;canRunBatch&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
       <span class="s2">&quot;enableCmdPrefix&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
       <span class="s2">&quot;jobRuntimes&quot;</span><span class="p">:</span> <span class="p">[],</span>
       <span class="s2">&quot;jobWorkingDir&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;jobEnvVariables&quot;</span><span class="p">:</span> <span class="p">[],</span>
       <span class="s2">&quot;jobMaxJobs&quot;</span><span class="p">:</span> <span class="mi">2147483647</span><span class="p">,</span>
       <span class="s2">&quot;jobMaxJobsPerUser&quot;</span><span class="p">:</span> <span class="mi">2147483647</span><span class="p">,</span>
       <span class="s2">&quot;batchScheduler&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;batchLogicalQueues&quot;</span><span class="p">:</span> <span class="p">[],</span>
       <span class="s2">&quot;batchDefaultLogicalQueue&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;jobCapabilities&quot;</span><span class="p">:</span> <span class="p">[],</span>
       <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
       <span class="s2">&quot;notes&quot;</span><span class="p">:</span> <span class="p">{},</span>
       <span class="s2">&quot;uuid&quot;</span><span class="p">:</span> <span class="s2">&quot;f83606bf-7a1a-4ff0-9953-dd732cc07ac0&quot;</span><span class="p">,</span>
       <span class="s2">&quot;deleted&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
       <span class="s2">&quot;created&quot;</span><span class="p">:</span> <span class="s2">&quot;2021-04-26T18:45:40.771Z&quot;</span><span class="p">,</span>
       <span class="s2">&quot;updated&quot;</span><span class="p">:</span> <span class="s2">&quot;2021-04-26T18:45:40.771Z&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
   <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;TAPIS_FOUND System found: tacc-sample-&lt;userid&gt;&quot;</span><span class="p">,</span>
   <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
   <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that authnCredential is <em>null</em>. Only specific Tapis services are authorized to retrieve credentials.</p>
</section>
<section id="retrieving-details-for-all-systems">
<h4>Retrieving details for all systems<a class="headerlink" href="#retrieving-details-for-all-systems" title="Link to this heading"></a></h4>
<p>To see the list of systems that you own:</p>
<p>Using PySDK:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">getSystems</span><span class="p">()</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems?select=allAttributes
</pre></div>
</div>
<p>The response should contain a list of items similar to the single listing shown above.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the sections below on <a class="reference internal" href="#searching">Searching</a>, <a class="reference internal" href="#selecting">Selecting</a>, <a class="reference internal" href="#sorting">Sorting</a> and <a class="reference internal" href="#limiting">Limiting</a> to find out how to control the
amount of information returned.</p>
</div>
</section>
</section>
<section id="child-systems">
<h3>Child Systems<a class="headerlink" href="#child-systems" title="Link to this heading"></a></h3>
<section id="creating-child-systems">
<h4>Creating Child Systems<a class="headerlink" href="#creating-child-systems" title="Link to this heading"></a></h4>
<p>The ability to create child systems provides a way to easily clone and manage systems based on existing systems.
Child systems allow a user to set only a few fields, and use all other values from an existing system. This reduces the
difficulty in creating a child system, but also allows the child system to be updated when the parent is updated.</p>
<p>To create a child system, create a local file (for example child_system_example.json) with the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-child-&lt;userid&gt;&quot;</span><span class="p">,</span>
   <span class="s2">&quot;effectiveUserId&quot;</span><span class="p">:</span> <span class="s2">&quot;$</span><span class="si">{apiUserId}</span><span class="s2">&quot;</span><span class="p">,</span>
   <span class="s2">&quot;rootDir&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/&lt;userid&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where <em>&lt;userid&gt;</em> is replaced with your username. Also ensure that the root directory path is correct. Now use the
create child system REST endpoint to create the child system. Let’s assume that the new child system will be a
child of a parent system called <em>parent-system</em>.</p>
<p>Using PySDK:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">tapipy.tapis</span> <span class="kn">import</span> <span class="n">Tapis</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tapis</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://tacc.tapis.io&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;&lt;userid&gt;&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;************&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;child_system_example.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">openfile</span><span class="p">:</span>
    <span class="n">child_system</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">openfile</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">createChildSystem</span><span class="p">(</span><span class="n">parentId</span><span class="o">=</span><span class="s2">&quot;parent-system&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">child_system</span><span class="p">)</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems/parent-system/createChildSystem -d @child_system_example.json
</pre></div>
</div>
<p>These fields are maintained
independently for child systems:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>String</p></td>
<td><p>ds1.storage.default</p></td>
<td><ul class="simple">
<li><p>Identifier for the system. URI safe, see RFC 3986.</p></li>
<li><p><em>tenant</em> + <em>id</em> must be unique.</p></li>
<li><p>Allowed characters: Alphanumeric [0-9a-zA-Z] and special characters [-._~].</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>owner</p></td>
<td><p>String</p></td>
<td><p>jdoe</p></td>
<td><ul class="simple">
<li><p>username of <em>owner</em>.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>. Resolved at create time.</p></li>
<li><p>By default this is the resolved value for <em>${apiUserId}</em>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>enabled</p></td>
<td><p>boolean</p></td>
<td><p>FALSE</p></td>
<td><ul class="simple">
<li><p>Indicates if system currently enabled for use.</p></li>
<li><p>May be updated using the enable/disable endpoints.</p></li>
<li><p>By default this is <em>true</em>.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>effectiveUserId</p></td>
<td><p>String</p></td>
<td><p>tg869834</p></td>
<td><ul class="simple">
<li><p>User to use when accessing the system.</p></li>
<li><p>May be a static string or a variable reference.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>, <em>${owner}</em></p></li>
<li><p>On output variable reference will be resolved.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>rootDir</p></td>
<td><p>String</p></td>
<td><p>/home/${apiUserId}</p></td>
<td><ul class="simple">
<li><p>Required if <em>systemType</em> is LINUX or IRODS or <em>isDtn</em> = true.</p></li>
<li><p>For LINUX or IRODS must begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p></li>
<li><p>Optional for S3 and will typically not begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p></li>
<li><p>Variable references are resolved at create time.</p></li>
<li><p>Serves as effective root directory when listing or moving files.</p></li>
<li><p>May not be updated. Contact support to request a change.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>, <em>${owner}</em>, <em>${tenant}</em></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>deleted</p></td>
<td><p>boolean</p></td>
<td><p>FALSE</p></td>
<td><ul class="simple">
<li><p>Indicates if system has been deleted.</p></li>
<li><p>May be updated using the delete/undelete endpoints.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>created</p></td>
<td><p>Timestamp</p></td>
<td><p>2020-06-19T15:10:43Z</p></td>
<td><ul class="simple">
<li><p>When the system was created. Maintained by service.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>updated</p></td>
<td><p>Timestamp</p></td>
<td><p>2020-07-04T23:21:22Z</p></td>
<td><ul class="simple">
<li><p>When the system was last updated. Maintained by service.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>During the creation of a child system, any of these fields may be specified except for created, updated and deleted.
All other fields are taken from the parent system.</p>
</section>
<section id="updating-a-child-system">
<h4>Updating a Child System<a class="headerlink" href="#updating-a-child-system" title="Link to this heading"></a></h4>
<p>Updates are done just like any other system, however, only the following fields may be updated for a child system.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>effectiveUserId</p></td>
<td><p>String</p></td>
<td><p>tg869834</p></td>
<td><ul class="simple">
<li><p>User to use when accessing the system.</p></li>
<li><p>May be a static string or a variable reference.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>, <em>${owner}</em></p></li>
<li><p>On output variable reference will be resolved.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Some other fields can be updated through special endpoints. For example deleted and enabled are updated through the endpoints for
deleting, undeleting, enabling and disabling.</p>
</section>
<section id="child-system-operations">
<h4>Child System Operations<a class="headerlink" href="#child-system-operations" title="Link to this heading"></a></h4>
<p>Most operations other than update are the same for child systems as they are for parent systems. For more information
see the appropriate section of the document for the operation.</p>
<ul class="simple">
<li><p>Delete   - see <a class="reference internal" href="#deletion">Deletion</a></p></li>
<li><p>Undelete - see <a class="reference internal" href="#deletion">Deletion</a></p></li>
<li><p>Enable   - see “enabled” in <a class="reference internal" href="#system-attributes-table">System Attributes Table</a></p></li>
<li><p>Disable  - see “enabled” in <a class="reference internal" href="#system-attributes-table">System Attributes Table</a></p></li>
</ul>
</section>
<section id="unlinking-a-child-system-from-it-s-parent-system">
<h4>Unlinking a Child System from it’s Parent System<a class="headerlink" href="#unlinking-a-child-system-from-it-s-parent-system" title="Link to this heading"></a></h4>
<p>A child system may be unlinked from it’s parent. This is a permanent operation, and cannot be undone. This will make the child a standalone
system with all of it’s current settings. When the unlink happens any fields that had previously been linked to the parent will be copied to
the child, and it will be as if the child was created as in independent system with those values.</p>
<p>If the owner of the child system wants to unlink the child from it’s parent, the owner may use the <em>unlinkFromParent</em> endpoint.</p>
<p>Using PySDK:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">tapipy.tapis</span> <span class="kn">import</span> <span class="n">Tapis</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tapis</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://tacc.tapis.io&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;&lt;userid&gt;&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;************&#39;</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">unlinkFromParent</span><span class="p">(</span><span class="n">childSystemId</span><span class="o">=</span><span class="s2">&quot;&lt;child-system-id&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems/&lt;child-system-id&gt;/unlinkFromParent
</pre></div>
</div>
<p>Replace <em>&lt;child-system-id&gt;</em> with the id of the child system.</p>
<p>The owner of a parent system can also decide to unlink child systems from the parent. In that case the parent system owner would use
the <em>unlinkChildren</em> endpoint. The child systems to unlink may be specified in the request body. First create a json file (for example children_to_unlink.json):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;childSystemIds&quot;</span><span class="p">:</span>
   <span class="p">[</span>
     <span class="s2">&quot;&lt;child-system-1-id&gt;&quot;</span><span class="p">,</span>
     <span class="s2">&quot;&lt;child-system-2-id&gt;&quot;</span>
     <span class="o">...</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Using PySDK:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">tapipy.tapis</span> <span class="kn">import</span> <span class="n">Tapis</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tapis</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://tacc.tapis.io&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;&lt;userid&gt;&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;************&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;children_to_unlink.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">openfile</span><span class="p">:</span>
    <span class="n">children_to_unlink</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">openfile</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">unlinkChildren</span><span class="p">(</span><span class="n">parentSystemId</span><span class="o">=</span><span class="s2">&quot;&lt;parent-system-id&gt;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">children_to_unlink</span><span class="p">)</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems/&lt;parent-system-id&gt;/unlinkChildren -d @./children_to_unlink.json
</pre></div>
</div>
<p>Or all child systems using <em>all=True</em> (no json file required)</p>
<p>Using PySDK:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">tapipy.tapis</span> <span class="kn">import</span> <span class="n">Tapis</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tapis</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://tacc.tapis.io&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;&lt;userid&gt;&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;************&#39;</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">systems</span><span class="o">.</span><span class="n">unlinkChildren</span><span class="p">(</span><span class="n">parentSystemId</span><span class="o">=</span><span class="s2">&quot;&lt;parent-system-id&gt;&quot;</span><span class="p">,</span> <span class="nb">all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Using CURL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; &quot;https://tacc.tapis.io/v3/systems/&lt;parent-system-id&gt;/unlinkChildren?all=true&quot;
</pre></div>
</div>
</section>
</section>
</section>
<section id="minimal-definition-and-restrictions">
<h2>Minimal Definition and Restrictions<a class="headerlink" href="#minimal-definition-and-restrictions" title="Link to this heading"></a></h2>
<p>When creating a system the required attributes are: <em>id</em>, <em>systemType</em>, <em>host</em>, <em>defaultAuthnMethod</em> and <em>canExec</em>.
Depending on the type of system and specific values for certain attributes there are other requirements.
The restrictions are:</p>
<ul class="simple">
<li><p>If <em>systemType</em> is S3 then <em>bucketName</em> is required, <em>canExec</em> and <em>isDtn</em> must be false.</p></li>
<li><p>If <em>systemType</em> is LINUX or IRODS then <em>rootDir</em> is required and must begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p></li>
<li><p>If <em>effectiveUserId</em> is <code class="docutils literal notranslate"><span class="pre">${apiUserId}</span></code> (i.e. it is not static) then <em>authnCredential</em> may not be specified.</p></li>
<li><p>If <em>isDtn</em> is true then <em>rootDir</em> is required, <em>canExec</em> must be false and following may not be specified: <em>dtnSystemId</em>, <em>dtnMountSourcePath</em>, <em>dtnMountPoint</em>, all job execution related attributes.</p></li>
<li><p>If <em>canExec</em> is true then <em>jobWorkingDir</em> is required and <em>jobRuntimes</em> must have at least one entry.</p></li>
<li><p>If <em>canRunBatch</em> is true then <em>batchScheduler</em> must be specified.</p></li>
<li><p>If <em>canRunBatch</em> is true then <em>batchLogicalQueues</em> must have at least one item.</p>
<ul>
<li><p>If <em>batchLogicalQueues</em> has more than one item then <em>batchLogicalDefaultQueue</em> must be specified.</p></li>
<li><p>If <em>batchLogicalQueues</em> has exactly one item then <em>batchLogicalDefaultQueue</em> is set to that item.</p></li>
</ul>
</li>
</ul>
</section>
<section id="permissions">
<h2>Permissions<a class="headerlink" href="#permissions" title="Link to this heading"></a></h2>
<p>The permissions model allows for fine grained access control of Tapis systems.</p>
<p>At system creation time the owner is given full access to the system.
Permissions for other users may be granted and revoked through the systems API. Please
note that grants and revokes through this service only impact the default role for the
user. A user may still have access through permissions in another role. So even after
revoking permissions through this service, when permissions are retrieved the access may
still be listed. This indicates access has been granted via another role.</p>
<p>Permissions are specified as either <code class="docutils literal notranslate"><span class="pre">*</span></code> for all permissions or some combination of the
following specific permissions: <code class="docutils literal notranslate"><span class="pre">(&quot;READ&quot;,&quot;MODIFY&quot;,&quot;EXECUTE&quot;)</span></code>. Specifying permissions in all
lower case is also allowed. Having <code class="docutils literal notranslate"><span class="pre">MODIFY</span></code> implies <code class="docutils literal notranslate"><span class="pre">READ</span></code>.</p>
</section>
<section id="sharing">
<h2>Sharing<a class="headerlink" href="#sharing" title="Link to this heading"></a></h2>
<p>In addition to fine grained permissions support, Tapis also supports a higher level approach to granting access.
This approach is known simply as <em>sharing</em>. The sharing API allows you to share a system with a set of users
as well as share publicly with all users in a tenant. Sharing provides <code class="docutils literal notranslate"><span class="pre">READ+EXECUTE</span></code> access.
When the system has a dynamic <em>effectiveUserId</em>, sharing also allows for MODIFY access to all paths for calls
made through the Files service.
Note that Tapis permissions and sharing are independent of native permissions enforced by the underlying system host.</p>
<p>The most common use case for sharing a system is to publicly share the system with all users in the tenant.
This would allow any user to use the system for execution or storage when running an application.</p>
<p>For more information on sharing please see <a class="reference internal" href="sharing.html"><span class="doc">Resource Sharing</span></a></p>
</section>
<section id="authentication-credentials">
<h2>Authentication Credentials<a class="headerlink" href="#authentication-credentials" title="Link to this heading"></a></h2>
<p>At system creation time the authentication credentials may be specified if the effective
access user <em>effectiveUserId</em> is a specific user (such as a service account) and not
a dynamic user (i.e. not equal to <code class="docutils literal notranslate"><span class="pre">${apiUserId}</span></code>).</p>
<p>If the effective access user is dynamic (i.e. equal to <code class="docutils literal notranslate"><span class="pre">${apiUserId}</span></code>) then authentication credentials for any
user allowed to access the system must be registered in separate API calls. In this case the payload provided may
contain the optional attribute <em>loginUser</em> which will be used to map the Tapis user to a username to be used when
accessing the system. If the login user is not provided then there is no mapping and the Tapis user is always used
when accessing the system.</p>
<p>Note that the Systems service does not store credentials. Credentials are persisted by the Security Kernel service
and only specific Tapis services are authorized to retrieve credentials.</p>
<p>By default any credentials provided for LINUX and S3 type systems are verified. The query parameter
<em>skipCredentialCheck=true</em> may be used to bypass the initial verification of credentials.</p>
</section>
<section id="runtime">
<h2>Runtime<a class="headerlink" href="#runtime" title="Link to this heading"></a></h2>
<p>Runtime environment supported by the system that may be used to run applications, such as docker or singularity.
Consists of the runtime type and version.</p>
</section>
<section id="logical-batch-queue">
<h2>Logical Batch Queue<a class="headerlink" href="#logical-batch-queue" title="Link to this heading"></a></h2>
<p>A queue that maps to a single HPC queue. Logical batch queues provide a uniform front end abstraction for an HPC queue.
They also provide more features and flexibility than is typically provided by an HPC scheduler. Multiple logical queues
may be defined for each HPC queue. If an HPC queue does not have a corresponding logical queue defined then a user will
not be able use the Tapis system to directly submit a job via Tapis to that HPC queue.</p>
</section>
<section id="deletion">
<h2>Deletion<a class="headerlink" href="#deletion" title="Link to this heading"></a></h2>
<p>A system may be deleted and undeleted. Deletion means the system is marked as deleted and
is no longer available for use. By default deleted systems will not be included in searches and operations on
deleted systems will not be allowed. When listing systems the query parameter <em>showDeleted</em> may be used in order
to include deleted systems in the results.</p>
</section>
<section id="system-attributes-table">
<h2>System Attributes Table<a class="headerlink" href="#system-attributes-table" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tenant</p></td>
<td><p>String</p></td>
<td><p>designsafe</p></td>
<td><ul class="simple">
<li><p>Name of the tenant for which the system is defined.</p></li>
<li><p><em>tenant</em> + <em>id</em> must be unique.</p></li>
<li><p>Determined by the service at system creation time.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>String</p></td>
<td><p>ds1.storage.default</p></td>
<td><ul class="simple">
<li><p>Identifier for the system. URI safe, see RFC 3986.</p></li>
<li><p><em>tenant</em> + <em>id</em> must be unique.</p></li>
<li><p>Allowed characters: Alphanumeric [0-9a-zA-Z] and special characters [-._~].</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>description</p></td>
<td><p>String</p></td>
<td><p>Default storage</p></td>
<td><ul class="simple">
<li><p>Description</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>systemType</p></td>
<td><p>enum</p></td>
<td><p>LINUX</p></td>
<td><ul class="simple">
<li><p>Type of system.</p></li>
<li><p>Types: LINUX, S3, IRODS, GLOBUS</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>owner</p></td>
<td><p>String</p></td>
<td><p>jdoe</p></td>
<td><ul class="simple">
<li><p>username of <em>owner</em>.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>. Resolved at create time.</p></li>
<li><p>By default this is the resolved value for <em>${apiUserId}</em>.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>host</p></td>
<td><p>String</p></td>
<td><p>data.tacc.utexas.edu</p></td>
<td><ul class="simple">
<li><p>Host name, ip address, Globus endpoint ID or Globus collection ID.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>enabled</p></td>
<td><p>boolean</p></td>
<td><p>FALSE</p></td>
<td><ul class="simple">
<li><p>Indicates if system currently enabled for use.</p></li>
<li><p>May be updated using the enable/disable endpoints.</p></li>
<li><p>By default this is <em>true</em>.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>effectiveUserId</p></td>
<td><p>String</p></td>
<td><p>tg869834</p></td>
<td><ul class="simple">
<li><p>User to use when accessing the system.</p></li>
<li><p>May be a static string or a variable reference.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>, <em>${owner}</em></p></li>
<li><p>On output variable reference will be resolved.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>defaultAuthnMethod</p></td>
<td><p>enum</p></td>
<td><p>PKI_KEYS</p></td>
<td><ul class="simple">
<li><p>How access authentication is handled by default.</p></li>
<li><p>Can be overridden as part of a request to get a system or credential.</p></li>
<li><p>Methods: PASSWORD, PKI_KEYS, ACCESS_KEY, TOKEN</p></li>
<li><p>See table <em>Credential Attributes</em> below for more information.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>authnCredential</p></td>
<td><p>Credential</p></td>
<td></td>
<td><ul class="simple">
<li><p>On input credentials to be stored in Security Kernel.</p></li>
<li><p><em>effectiveUserId</em> must be static, either a string constant or ${owner}.</p></li>
<li><p>May not be specified if <em>effectiveUserId</em> is dynamic, i.e. <em>${apiUserId}</em>.</p></li>
<li><p>On output contains credential for <em>effectiveUserId</em> and requested <em>authnMethod</em>.</p></li>
<li><p>Returned credential contains relevant information based on <em>authnMethod</em>.</p></li>
<li><p>Credentials may be updated using the systems credentials endpoint.</p></li>
<li><p>By default for LINUX the credentials are verified during create or update.</p></li>
<li><p>Use query parameter skipCredentialCheck=true to bypass initial verification.</p></li>
<li><p>See table <em>Credential Attributes</em> below for more information.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>bucketName</p></td>
<td><p>String</p></td>
<td><p>tapis-ds1-jdoe</p></td>
<td><ul class="simple">
<li><p>Name of bucket for an S3 system.</p></li>
<li><p>Required if <em>systemType</em> is S3.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>, <em>${owner}</em>, <em>${tenant}</em></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>rootDir</p></td>
<td><p>String</p></td>
<td><p>/home/${apiUserId}</p></td>
<td><ul class="simple">
<li><p>Required if <em>systemType</em> is LINUX or IRODS or <em>isDtn</em> = true.</p></li>
<li><p>For LINUX or IRODS must begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p></li>
<li><p>Optional for S3 and will typically not begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p></li>
<li><p>Variable references are resolved at create time.</p></li>
<li><p>Serves as effective root directory when listing or moving files.</p></li>
<li><p>May not be updated. Contact support to request a change.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>, <em>${owner}</em>, <em>${tenant}</em></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>port</p></td>
<td><p>int</p></td>
<td><p>22</p></td>
<td><ul class="simple">
<li><p>Port number used to access the system</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>useProxy</p></td>
<td><p>boolean</p></td>
<td><p>TRUE</p></td>
<td><ul class="simple">
<li><p>Indicates if system should be accessed through a proxy.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>proxyHost</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Name of proxy host.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>proxyPort</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Port number for <em>proxyHost</em></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>dtnSystemId</p></td>
<td><p>String</p></td>
<td><p>default.corral.dtn</p></td>
<td><ul class="simple">
<li><p>An alternate system to use as a Data Transfer Node (DTN).</p></li>
<li><p>This system and <em>dtnSystemId</em> must have shared storage.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>dtnMountPoint</p></td>
<td><p>String</p></td>
<td><p>/gpfs/corral3/repl</p></td>
<td><ul class="simple">
<li><p>Mount point (aka target) used when running the mount command on this system.</p></li>
<li><p>Base location on this system for files transferred to <em>rootDir</em> on <em>dtnSystemId.</em></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>dtnMountSourcePath</p></td>
<td><p>String</p></td>
<td><p>/gpfs/corral3/repl</p></td>
<td><ul class="simple">
<li><p>Relative path defining DTN source directory relative to rootDir on <em>dtnSystemId.</em></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>isDtn</p></td>
<td><p>boolean</p></td>
<td><p>FALSE</p></td>
<td><ul class="simple">
<li><p>Indicates if system will be used as a data transfer node (DTN).</p></li>
<li><p>By default this is <em>false</em>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>canExec</p></td>
<td><p>boolean</p></td>
<td></td>
<td><ul class="simple">
<li><p>Indicates if system will be used to execute jobs.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>canRunBatch</p></td>
<td><p>boolean</p></td>
<td></td>
<td><ul class="simple">
<li><p>Indicates if system supports running jobs using a batch scheduler.</p></li>
<li><p>By default this is <em>false</em>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>enableCmdPrefix</p></td>
<td><p>boolean</p></td>
<td></td>
<td><ul class="simple">
<li><p>Indicates if system allows a job submission request to specify a cmdPrefix.</p></li>
<li><p>By default this is <em>false</em>.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>jobRuntimes</p></td>
<td><p>[Runtime]</p></td>
<td></td>
<td><ul class="simple">
<li><p>List of runtime environments supported by the system.</p></li>
<li><p>At least one entry required if <em>canExec</em> is true.</p></li>
<li><p>Each Runtime specifies the Runtime type and version</p></li>
<li><p>Runtime type is required and must be one of: DOCKER, SINGULARITY.</p></li>
<li><p>Runtime version is optional.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>jobWorkingDir</p></td>
<td><p>String</p></td>
<td><p>HOST_EVAL($SCRATCH)</p></td>
<td><ul class="simple">
<li><p>Parent directory from which a job is run.</p></li>
<li><p>Relative to the effective root directory <em>rootDir</em>.</p></li>
<li><p>Required if <em>canExec</em> is true.</p></li>
<li><p>Variable references: <em>${apiUserId}</em>, <em>${owner}</em>, <em>${tenant}</em></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>jobEnvVariables</p></td>
<td><p>[KeyValuePair]</p></td>
<td></td>
<td><ul class="simple">
<li><p>Environment variables added to the shell environment in which the job is running.</p></li>
<li><p>Added to environment variables specified in job and application definitions.</p></li>
<li><p>Each entry has <em>key</em> (required) and <em>value</em> (optional) as well as other attributes.</p></li>
<li><p>See table <em>KeyValuePair Attributes</em> below for more information.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>jobMaxJobs</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Max total number of jobs .</p></li>
<li><p>Set to -1 for unlimited.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>jobMaxJobsPerUser</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Max total number of jobs associated with a specific user.</p></li>
<li><p>Set to -1 for unlimited.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>batchScheduler</p></td>
<td><p>String</p></td>
<td><p>SLURM</p></td>
<td><ul class="simple">
<li><p>Type of scheduler used when running batch jobs.</p></li>
<li><p>Schedulers: SLURM</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>batchLogicalQueues</p></td>
<td><p>[LogicalQueue]</p></td>
<td></td>
<td><ul class="simple">
<li><p>List of logical queues available on the system.</p></li>
<li><p>Each logical queue maps to a single HPC queue.</p></li>
<li><p>Multiple logical queues may be defined for each HPC queue.</p></li>
<li><p>See table <em>LogicalQueue Attributes</em> below for more information.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>batchDefaultLogical
Queue</p></td>
<td><p>LogicalQueue</p></td>
<td></td>
<td><ul class="simple">
<li><p>Default logical batch queue for the system.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>tags</p></td>
<td><p>[String]</p></td>
<td></td>
<td><ul class="simple">
<li><p>List of tags as simple strings.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>notes</p></td>
<td><p>String</p></td>
<td><p>“{}”</p></td>
<td><ul class="simple">
<li><p>Simple metadata in the form of a Json object.</p></li>
<li><p>Not used by Tapis.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>uuid</p></td>
<td><p>UUID</p></td>
<td></td>
<td><ul class="simple">
<li><p>Auto-generated by service.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>deleted</p></td>
<td><p>boolean</p></td>
<td><p>FALSE</p></td>
<td><ul class="simple">
<li><p>Indicates if system has been deleted.</p></li>
<li><p>May be updated using the delete/undelete endpoints.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>created</p></td>
<td><p>Timestamp</p></td>
<td><p>2020-06-19T15:10:43Z</p></td>
<td><ul class="simple">
<li><p>When the system was created. Maintained by service.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>updated</p></td>
<td><p>Timestamp</p></td>
<td><p>2020-07-04T23:21:22Z</p></td>
<td><ul class="simple">
<li><p>When the system was last updated. Maintained by service.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="credential-attributes-table">
<h2>Credential Attributes Table<a class="headerlink" href="#credential-attributes-table" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>user</p></td>
<td><p>String</p></td>
<td><p>jsmith</p></td>
<td><ul class="simple">
<li><p>Username associated with the credential.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>authnMethod</p></td>
<td><p>String</p></td>
<td><p>PKI_KEYS</p></td>
<td><ul class="simple">
<li><p>Indicates the authentication method associated with a retrieved credential.</p></li>
<li><p>When a credential is retrieved it is for a specific authentication method.</p></li>
<li><p>Methods: PASSWORD, PKI_KEYS, ACCESS_KEY, TOKEN</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>loginUser</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Optional native username valid on the system.</p></li>
<li><p>May be used to map a Tapis user to a native login user.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>password</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Password for when authnMethod is PASSWORD. For LINUX and IRODS systems.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>privateKey</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Private key for when authnMethod is PKI_KEYS. For LINUX systems.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>publicKey</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Public key for when authnMethod is PKI_KEYS.  For LINUX systems.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>accessKey</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Access key for when authnMethod is ACCESS_KEY. For S3 systems.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>accessSecret</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Access secret for when authnMethod is ACCESS_KEY. For S3 systems.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>accessToken</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Access token for when authnMethod is TOKEN. For GLOBUS systems.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>refreshToken</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Refresh token for when authnMethod is TOKEN. For GLOBUS systems.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="keyvaluepair-attributes-table">
<h2>KeyValuePair Attributes Table<a class="headerlink" href="#keyvaluepair-attributes-table" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>key</p></td>
<td><p>String</p></td>
<td><p>“INPUT_FILE”</p></td>
<td><ul class="simple">
<li><p>Environment variable name. Required.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>value</p></td>
<td><p>String</p></td>
<td><p>“/tmp/file.input”</p></td>
<td><ul class="simple">
<li><p>Environment variable value</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>description</p></td>
<td><p>String</p></td>
<td></td>
<td><ul class="simple">
<li><p>Description</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>inputMode</p></td>
<td><p>enum</p></td>
<td><p>REQUIRED</p></td>
<td><ul class="simple">
<li><p>Indicates how argument is to be treated when processing individual job requests.</p></li>
<li><p>Modes: REQUIRED, FIXED, INCLUDE_ON_DEMAND, INCLUDE_BY_DEFAULT</p></li>
<li><p>Default is INCLUDE_BY_DEFAULT.</p></li>
<li><p>REQUIRED: Must be provided in a job request or application definition.</p></li>
<li><p>FIXED: Not overridable in application or job request.</p></li>
<li><p>INCLUDE_ON_DEMAND: Included if referenced in a job request.</p></li>
<li><p>INCLUDE_BY_DEFAULT: Included unless <em>include=false</em> in a job request.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>notes</p></td>
<td><p>String</p></td>
<td><p>“{}”</p></td>
<td><ul class="simple">
<li><p>Simple metadata in the form of a Json object.</p></li>
<li><p>Not used by Tapis.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="logicalqueue-attributes-table">
<h2>LogicalQueue Attributes Table<a class="headerlink" href="#logicalqueue-attributes-table" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>String</p></td>
<td><p>tapisNormal</p></td>
<td><ul class="simple">
<li><p>Name for logical queue. Typically will match or be a variant of HPC queue name.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>hpcQueueName</p></td>
<td><p>String</p></td>
<td><p>normal</p></td>
<td><ul class="simple">
<li><p>Name of the HPC queue for which this logical queue is a front end.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>maxJobs</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Maximum total number of jobs that can be queued or running in this queue.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>maxJobsPerUser</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Maximum number of jobs associated with a specific user that can be queued.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>minNodeCount</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Minimum number of nodes that can be requested when submitting a job to the queue.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>maxNodeCount</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Maximum number of nodes that can be requested when submitting a job to the queue.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>minCoresPerNode</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Minimum number of cores per node that can be requested when submitting a job.</p></li>
<li><p>Default is 1</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>maxCoresPerNode</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Maximum number of cores per node that can be requested when submitting a job.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>minMemoryMB</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Minimum memory in megabytes that can be requested when submitting a job.</p></li>
<li><p>Default is 0</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>maxMemoryMB</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Maximum memory in megabytes that can be requested when submitting a job.</p></li>
<li><p>Default is unlimited</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>minMinutes</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Minimum run time in minutes that can be requested when submitting a job.</p></li>
<li><p>Default is 0</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>maxMinutes</p></td>
<td><p>int</p></td>
<td></td>
<td><ul class="simple">
<li><p>Maximum run time in minutes that can be requested when submitting a job.</p></li>
<li><p>Default is unlimited</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="searching">
<h2>Searching<a class="headerlink" href="#searching" title="Link to this heading"></a></h2>
<p>The service provides a way for users to search for systems based on a list of search conditions provided either as query
parameters for a GET call or a list of conditions in a request body for a POST call to a dedicated search endpoint.</p>
<section id="search-using-get">
<h3>Search using GET<a class="headerlink" href="#search-using-get" title="Link to this heading"></a></h3>
<p>To search when using a GET request to the <code class="docutils literal notranslate"><span class="pre">systems</span></code> endpoint a list of search conditions may be specified
using a query parameter named <code class="docutils literal notranslate"><span class="pre">search</span></code>. Each search condition must be surrounded with parentheses, have three parts
separated by the character <code class="docutils literal notranslate"><span class="pre">.</span></code> and be joined using the character <code class="docutils literal notranslate"><span class="pre">~</span></code>.
All conditions are combined using logical AND. The general form for specifying the query parameter is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>?search=(&lt;attribute_1&gt;.&lt;op_1&gt;.&lt;value_1&gt;)~(&lt;attribute_2&gt;.&lt;op_2&gt;.&lt;value_2&gt;)~ ... ~(&lt;attribute_N&gt;.&lt;op_N&gt;.&lt;value_N&gt;)
</pre></div>
</div>
<p>Attribute names are given in the table above and may be specified using Camel Case or Snake Case.</p>
<p>Supported operators: <code class="docutils literal notranslate"><span class="pre">eq</span></code> <code class="docutils literal notranslate"><span class="pre">neq</span></code> <code class="docutils literal notranslate"><span class="pre">gt</span></code> <code class="docutils literal notranslate"><span class="pre">gte</span></code> <code class="docutils literal notranslate"><span class="pre">lt</span></code> <code class="docutils literal notranslate"><span class="pre">lte</span></code> <code class="docutils literal notranslate"><span class="pre">in</span></code> <code class="docutils literal notranslate"><span class="pre">nin</span></code> <code class="docutils literal notranslate"><span class="pre">like</span></code> <code class="docutils literal notranslate"><span class="pre">nlike</span></code> <code class="docutils literal notranslate"><span class="pre">between</span></code> <code class="docutils literal notranslate"><span class="pre">nbetween</span></code></p>
<p>Example CURL command to search for systems that have <code class="docutils literal notranslate"><span class="pre">Test</span></code> in the id, are of type LINUX,
are using a port less than <code class="docutils literal notranslate"><span class="pre">1024</span></code> and have a default authentication method of either <code class="docutils literal notranslate"><span class="pre">PKI_KEYS</span></code> or <code class="docutils literal notranslate"><span class="pre">PASSWORD</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems?search=&quot;(id.like.*Test*)~(system_type.eq.LINUX)~(port.lt.1024)~(DefaultAuthnMethod.in.PKI_KEYS,PASSWORD)&quot;
</pre></div>
</div>
<p>Notes:</p>
<ul>
<li><p>For the <code class="docutils literal notranslate"><span class="pre">like</span></code> and <code class="docutils literal notranslate"><span class="pre">nlike</span></code> operators the wildcard character <code class="docutils literal notranslate"><span class="pre">*</span></code> matches zero or more characters and <code class="docutils literal notranslate"><span class="pre">!</span></code> matches exactly one character.</p></li>
<li><p>For the <code class="docutils literal notranslate"><span class="pre">between</span></code> and <code class="docutils literal notranslate"><span class="pre">nbetween</span></code> operators the value must be a two item comma separated list of unquoted values.</p></li>
<li><p>If there is only one condition the surrounding parentheses are optional.</p></li>
<li><p>In a shell environment the character <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> separating query parameters must be escaped with a backslash.</p></li>
<li><p>In a shell environment the query value must be surrounded by double quotes and the following characters must be escaped with a backslash in order to be properly interpreted by the shell:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">\</span></code> <code class="docutils literal notranslate"><span class="pre">`</span></code></p></li>
</ul>
</li>
<li><p>Attribute names may be specified using Camel Case or Snake Case.</p></li>
<li><p>Following complex attributes not supported when searching:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">authnCredential</span></code> <code class="docutils literal notranslate"><span class="pre">jobRuntimes</span></code> <code class="docutils literal notranslate"><span class="pre">jobEnvVariables</span></code> <code class="docutils literal notranslate"><span class="pre">batchLogicalQueues</span></code>  <code class="docutils literal notranslate"><span class="pre">notes</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="dedicated-search-endpoint">
<h3>Dedicated Search Endpoint<a class="headerlink" href="#dedicated-search-endpoint" title="Link to this heading"></a></h3>
<p>The service provides the dedicated search endpoint <code class="docutils literal notranslate"><span class="pre">systems/search/systems</span></code> for specifying complex queries. Using a GET
request to this endpoint provides functionality similar to above but with a different syntax. For more complex
queries a POST request may be used with a request body specifying the search conditions using an SQL-like syntax.</p>
<section id="search-using-get-on-dedicated-endpoint">
<h4>Search using GET on Dedicated Endpoint<a class="headerlink" href="#search-using-get-on-dedicated-endpoint" title="Link to this heading"></a></h4>
<p>Sending a GET request to the search endpoint provides functionality very similar to that provided for the endpoint
<code class="docutils literal notranslate"><span class="pre">systems</span></code> described above. A list of search conditions may be specified using a series of query parameters, one for each attribute.
All conditions are combined using logical AND. The general form for specifying the query parameters is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>?&lt;attribute_1&gt;.&lt;op_1&gt;=&lt;value_1&gt;&amp;&lt;attribute_2&gt;.&lt;op_2&gt;=&lt;value_2&gt;)&amp; ... &amp;&lt;attribute_N&gt;.&lt;op_N&gt;=&lt;value_N&gt;
</pre></div>
</div>
<p>Attribute names are given in the table above and may be specified using Camel Case or Snake Case.</p>
<p>Supported operators: <code class="docutils literal notranslate"><span class="pre">eq</span></code> <code class="docutils literal notranslate"><span class="pre">neq</span></code> <code class="docutils literal notranslate"><span class="pre">gt</span></code> <code class="docutils literal notranslate"><span class="pre">gte</span></code> <code class="docutils literal notranslate"><span class="pre">lt</span></code> <code class="docutils literal notranslate"><span class="pre">lte</span></code> <code class="docutils literal notranslate"><span class="pre">in</span></code> <code class="docutils literal notranslate"><span class="pre">nin</span></code> <code class="docutils literal notranslate"><span class="pre">like</span></code> <code class="docutils literal notranslate"><span class="pre">nlike</span></code> <code class="docutils literal notranslate"><span class="pre">between</span></code> <code class="docutils literal notranslate"><span class="pre">nbetween</span></code></p>
<p>Example CURL command to search for systems that have <code class="docutils literal notranslate"><span class="pre">Test</span></code> in the name, are of type <code class="docutils literal notranslate"><span class="pre">LINUX</span></code>,
are using a port less than <code class="docutils literal notranslate"><span class="pre">1024</span></code> and have a default authentication method of either <code class="docutils literal notranslate"><span class="pre">PKI_KEYS</span></code> or <code class="docutils literal notranslate"><span class="pre">PASSWORD</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems/search/systems?name.like=*Test*\&amp;enabled.eq=true\&amp;system_type.eq=LINUX\&amp;DefaultAuthnMethod.in=PKI_KEYS,PASSWORD
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li><p>For the <code class="docutils literal notranslate"><span class="pre">like</span></code> and <code class="docutils literal notranslate"><span class="pre">nlike</span></code> operators the wildcard character <code class="docutils literal notranslate"><span class="pre">*</span></code> matches zero or more characters and <code class="docutils literal notranslate"><span class="pre">!</span></code> matches exactly one character.</p></li>
<li><p>For the <code class="docutils literal notranslate"><span class="pre">between</span></code> and <code class="docutils literal notranslate"><span class="pre">nbetween</span></code> operators the value must be a two item comma separated list of unquoted values.</p></li>
<li><p>In a shell environment the character <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> separating query parameters must be escaped with a backslash.</p></li>
<li><p>Attribute names may be specified using Camel Case or Snake Case.</p></li>
<li><p>Following complex attributes not supported when searching:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">authnCredential</span></code> <code class="docutils literal notranslate"><span class="pre">jobRuntimes</span></code> <code class="docutils literal notranslate"><span class="pre">jobEnvVariables</span></code> <code class="docutils literal notranslate"><span class="pre">batchLogicalQueues</span></code>  <code class="docutils literal notranslate"><span class="pre">tags</span></code>  <code class="docutils literal notranslate"><span class="pre">notes</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="search-using-post-on-dedicated-endpoint">
<h4>Search using POST on Dedicated Endpoint<a class="headerlink" href="#search-using-post-on-dedicated-endpoint" title="Link to this heading"></a></h4>
<p>More complex search queries are supported when sending a POST request to the endpoint <code class="docutils literal notranslate"><span class="pre">systems/search/systems</span></code>.
For these requests the request body must contain json with a top level property name of <code class="docutils literal notranslate"><span class="pre">search</span></code>. The
<code class="docutils literal notranslate"><span class="pre">search</span></code> property must contain an array of strings specifying the search criteria in
an SQL-like syntax. The array of strings are concatenated to form the full search query.
The full query must be in the form of an SQL-like <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause. Note that not all SQL features are supported.</p>
<p>For example, to search for systems that are owned by <code class="docutils literal notranslate"><span class="pre">jdoe</span></code> and of type <code class="docutils literal notranslate"><span class="pre">LINUX</span></code> or owned by
<code class="docutils literal notranslate"><span class="pre">jsmith</span></code> and using a port less than <code class="docutils literal notranslate"><span class="pre">1024</span></code> create a local file named <code class="docutils literal notranslate"><span class="pre">system_search.json</span></code>
with following json:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;search&quot;</span><span class="p">:</span>
    <span class="p">[</span>
      <span class="s2">&quot;(owner = &#39;jdoe&#39; AND system_type = &#39;LINUX&#39;) OR&quot;</span><span class="p">,</span>
      <span class="s2">&quot;(owner = &#39;jsmith&#39; AND port &lt; 1024)&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To execute the search use a CURL command similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X POST -H &quot;content-type: application/json&quot; -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems/search/systems -d @system_search.json
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li><p>String values must be surrounded by single quotes.</p></li>
<li><p>Values for BETWEEN must be surrounded by single quotes.</p></li>
<li><p>Search query parameters as described above may not be used in conjunction with a POST request.</p></li>
<li><p>SQL features not supported include:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">IS</span> <span class="pre">NULL</span></code> and <code class="docutils literal notranslate"><span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code></p></li>
<li><p>Arithmetic operations</p></li>
<li><p>Unary operators</p></li>
<li><p>Specifying escape character for <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> operator</p></li>
</ul>
</li>
</ul>
<section id="map-of-sql-operators-to-tapis-operators">
<h5>Map of SQL operators to Tapis operators<a class="headerlink" href="#map-of-sql-operators-to-tapis-operators" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Sql Operator</p></th>
<th class="head"><p>Tapis Operator</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>=</p></td>
<td><p>eq</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;&gt;</p></td>
<td><p>neq</p></td>
</tr>
<tr class="row-even"><td><p>&lt;</p></td>
<td><p>lt</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;=</p></td>
<td><p>lte</p></td>
</tr>
<tr class="row-even"><td><p>&gt;</p></td>
<td><p>gt</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;=</p></td>
<td><p>gte</p></td>
</tr>
<tr class="row-even"><td><p>LIKE</p></td>
<td><p>like</p></td>
</tr>
<tr class="row-odd"><td><p>NOT LIKE</p></td>
<td><p>nlike</p></td>
</tr>
<tr class="row-even"><td><p>BETWEEN</p></td>
<td><p>between</p></td>
</tr>
<tr class="row-odd"><td><p>NOT BETWEEN</p></td>
<td><p>nbetween</p></td>
</tr>
<tr class="row-even"><td><p>IN</p></td>
<td><p>in</p></td>
</tr>
<tr class="row-odd"><td><p>NOT IN</p></td>
<td><p>nin</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>
<section id="sort-limit-select-and-listtype">
<h2>Sort, Limit, Select and ListType<a class="headerlink" href="#sort-limit-select-and-listtype" title="Link to this heading"></a></h2>
<p>When a list of Systems is retrieved the service provides for sorting, filtering and limiting the results.
By default, only resources owned by you will be included. The service provides a way for you to request that
all resources accessible to you be included. This is determined by the query parameter <em>listType</em>.</p>
<p>When retrieving either a list of resources or a single resource the service also provides a way to <em>select</em> which
fields (i.e. attributes) are included in the results. Sorting, limiting and attribute selection are supported using
query parameters.</p>
<section id="selecting">
<h3>Selecting<a class="headerlink" href="#selecting" title="Link to this heading"></a></h3>
<p>When retrieving systems the fields (i.e. attributes) to be returned may be specified as a comma separated list using
a query parameter named <code class="docutils literal notranslate"><span class="pre">select</span></code>. Attribute names may be given using Camel Case or Snake Case.</p>
<p>Notes:</p>
<blockquote>
<div><ul class="simple">
<li><p>Special select keywords are supported: <code class="docutils literal notranslate"><span class="pre">allAttributes</span></code> and <code class="docutils literal notranslate"><span class="pre">summaryAttributes</span></code></p></li>
<li><p>Summary attributes include:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">systemType</span></code>, <code class="docutils literal notranslate"><span class="pre">owner</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">effectiveUserId</span></code>, <code class="docutils literal notranslate"><span class="pre">defaultAuthnMethod</span></code>, <code class="docutils literal notranslate"><span class="pre">canExec</span></code></p></li>
</ul>
</li>
<li><p>By default all attributes are returned when retrieving a single resource via the endpoint <em>systems/&lt;system_id&gt;</em>.</p></li>
<li><p>By default summary attributes are returned when retrieving a list of systems.</p></li>
<li><p>Specifying nested attributes is not supported.</p></li>
<li><p>The attribute <code class="docutils literal notranslate"><span class="pre">id</span></code> is always returned.</p></li>
</ul>
</div></blockquote>
<p>For example, to return only the attributes <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">effectiveUserId</span></code> the
CURL command would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems?select=host,effectiveUserId
</pre></div>
</div>
<p>The response should look similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
           <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;CSys_CltSrchGet_011&quot;</span><span class="p">,</span>
           <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;hostCltSrchGet_011&quot;</span><span class="p">,</span>
           <span class="s2">&quot;effectiveUserId&quot;</span><span class="p">:</span> <span class="s2">&quot;effUserCltSrchGet_011&quot;</span>
       <span class="p">},</span>
       <span class="p">{</span>
           <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;CSys_CltSrchGet_012&quot;</span><span class="p">,</span>
           <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;hostCltSrchGet_012&quot;</span><span class="p">,</span>
           <span class="s2">&quot;effectiveUserId&quot;</span><span class="p">:</span> <span class="s2">&quot;effUserCltSrchGet_012&quot;</span>
       <span class="p">},</span>
       <span class="p">{</span>
           <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;CSys_CltSrchGet_013&quot;</span><span class="p">,</span>
           <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;hostCltSrchGet_013&quot;</span><span class="p">,</span>
           <span class="s2">&quot;effectiveUserId&quot;</span><span class="p">:</span> <span class="s2">&quot;effUserCltSrchGet_013&quot;</span>
       <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
   <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;TAPIS_FOUND Systems found: 12 systems&quot;</span><span class="p">,</span>
   <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
   <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;recordCount&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
       <span class="s2">&quot;recordLimit&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
       <span class="s2">&quot;recordsSkipped&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
       <span class="s2">&quot;orderBy&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;startAfter&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
       <span class="s2">&quot;totalCount&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="sorting">
<h3>Sorting<a class="headerlink" href="#sorting" title="Link to this heading"></a></h3>
<p>The query parameter for sorting is named <code class="docutils literal notranslate"><span class="pre">orderBy</span></code> and the value is the attribute name to sort on with an optional
sort direction. The general format is <code class="docutils literal notranslate"><span class="pre">&lt;attribute_name&gt;(&lt;dir&gt;)</span></code>. The direction may be <code class="docutils literal notranslate"><span class="pre">asc</span></code> for ascending or
<code class="docutils literal notranslate"><span class="pre">desc</span></code> for descending. The default direction is ascending.</p>
<p>Examples:</p>
<blockquote>
<div><ul class="simple">
<li><p>orderBy=id</p></li>
<li><p>orderBy=id(asc)</p></li>
<li><p>orderBy=name(desc),created</p></li>
<li><p>orderBy=id(asc),created(desc)</p></li>
</ul>
</div></blockquote>
</section>
<section id="limiting">
<h3>Limiting<a class="headerlink" href="#limiting" title="Link to this heading"></a></h3>
<p>Additional query parameters may be used in order to limit the number and starting point for results. This is useful for
implementing paging. The query parameters are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">limit</span></code> - Limit number of items returned. For example limit=10.</p>
<ul>
<li><p>Use 0 or less for unlimited.</p></li>
<li><p>Default is 100.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">skip</span></code> - Number of items to skip. For example skip=10.</p>
<ul>
<li><p>May not be used with startAfter.</p></li>
<li><p>Default is 0.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">startAfter</span></code> - Where to start when sorting. For example limit=10&amp;orderBy=id(asc),created(desc)&amp;startAfter=101</p>
<ul>
<li><p>May not be used with <code class="docutils literal notranslate"><span class="pre">skip</span></code>.</p></li>
<li><p>Must also specify <code class="docutils literal notranslate"><span class="pre">orderBy</span></code>.</p></li>
<li><p>The value of <code class="docutils literal notranslate"><span class="pre">startAfter</span></code> applies to the major <code class="docutils literal notranslate"><span class="pre">orderBy</span></code> field.</p></li>
<li><p>Condition is context dependent. For ascending the condition is value &gt; <code class="docutils literal notranslate"><span class="pre">startAfter</span></code> and for descending the condition is value &lt; <code class="docutils literal notranslate"><span class="pre">startAfter</span></code>.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>When implementing paging it is recommend to always use <code class="docutils literal notranslate"><span class="pre">orderBy</span></code> and when possible use <code class="docutils literal notranslate"><span class="pre">limit+startAfter</span></code> rather
than <code class="docutils literal notranslate"><span class="pre">limit+skip</span></code>. Sorting should always be included since returned results are not guaranteed to be in the same order
for each call. The combination of <code class="docutils literal notranslate"><span class="pre">limit+startAfter</span></code> is preferred because <code class="docutils literal notranslate"><span class="pre">limit+skip</span></code> is more likely to result in
inconsistent results as records are added and removed. Using <code class="docutils literal notranslate"><span class="pre">limit+startAfter</span></code> works best when the attribute has a
natural sequential ordering such as when an attribute represents a timestamp or a sequential ID.</p>
</section>
<section id="listtype">
<h3>ListType<a class="headerlink" href="#listtype" title="Link to this heading"></a></h3>
<p>By default, you will only see the resources that you own. The query parameter <em>listType</em> allows you to see additional
resources that are available to you.</p>
<p>Options:</p>
<dl class="simple">
<dt><em>OWNED</em></dt><dd><p>Include only items owned by you (Default)</p>
</dd>
<dt><em>SHARED_PUBLIC</em></dt><dd><p>Include only items shared publicly</p>
</dd>
<dt><em>ALL</em></dt><dd><p>Include all items you are authorized to view.</p>
</dd>
</dl>
</section>
</section>
<section id="tapis-responses">
<h2>Tapis Responses<a class="headerlink" href="#tapis-responses" title="Link to this heading"></a></h2>
<p>For requests that return a list of resources the response result object will contain the list of resource records that
match the user’s query and the response metadata object will contain information related to sorting and limiting.</p>
<p>The metadata object will contain the following information:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">recordCount</span></code> - Actual number of records returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recordLimit</span></code> - The limit query parameter specified in the request. -1 if query parameter was not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recordsSkipped</span></code> - The skip query parameter specified in the request. -1 if query parameter was not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">orderBy</span></code> - The orderBy query parameter specified in the request. Empty string if query parameter was not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">startAfter</span></code> - The startAfter query parameter specified in the request. Empty string if query parameter was not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">totalCount</span></code> - Total number of records that would have been returned without a limit query parameter being imposed. -1 if total count was not computed.</p></li>
</ul>
</div></blockquote>
<p>For performance reasons computation of <code class="docutils literal notranslate"><span class="pre">totalCount</span></code> is only determined on demand. This is controlled by the boolean
query parameter <code class="docutils literal notranslate"><span class="pre">computeTotal</span></code>. By default <code class="docutils literal notranslate"><span class="pre">computeTotal</span></code> is <em>false</em>.</p>
<p>Example query and response:</p>
<p>Query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -H &quot;X-Tapis-Token: $JWT&quot; https://tacc.tapis.io/v3/systems?limit=2&amp;orderBy=id(desc)
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">[</span>
   <span class="p">{</span>
     <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;testMin0&quot;</span><span class="p">,</span>
     <span class="s2">&quot;systemType&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
     <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser&quot;</span><span class="p">,</span>
     <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;my.example.host&quot;</span><span class="p">,</span>
     <span class="s2">&quot;defaultAccessMethod&quot;</span><span class="p">:</span> <span class="s2">&quot;ACCESS_KEY&quot;</span><span class="p">,</span>
     <span class="s2">&quot;canExec&quot;</span><span class="p">:</span> <span class="n">false</span>
   <span class="p">},</span>
   <span class="p">{</span>
     <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;MinSystem1c&quot;</span><span class="p">,</span>
     <span class="s2">&quot;systemType&quot;</span><span class="p">:</span> <span class="s2">&quot;LINUX&quot;</span><span class="p">,</span>
     <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser&quot;</span><span class="p">,</span>
     <span class="s2">&quot;defaultAccessMethod&quot;</span><span class="p">:</span> <span class="s2">&quot;PASSWORD&quot;</span><span class="p">,</span>
     <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;data.tacc.utexas.edu&quot;</span><span class="p">,</span>
     <span class="s2">&quot;canExec&quot;</span><span class="p">:</span> <span class="n">true</span>
   <span class="p">}</span>
 <span class="p">],</span>
 <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
 <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;TAPIS_FOUND Systems found: 2 systems&quot;</span><span class="p">,</span>
 <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
 <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;recordCount&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
   <span class="s2">&quot;recordLimit&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
   <span class="s2">&quot;recordsSkipped&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s2">&quot;orderBy&quot;</span><span class="p">:</span> <span class="s2">&quot;id(desc)&quot;</span><span class="p">,</span>
   <span class="s2">&quot;startAfter&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
   <span class="s2">&quot;totalCount&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
 <span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ICICLE.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>