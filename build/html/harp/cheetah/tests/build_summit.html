<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>How to build the dependencies on Summit &#8212; ICICLE-READTHEDOCS  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=cb25574f" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="how-to-build-the-dependencies-on-summit">
<h1>How to build the dependencies on Summit<a class="headerlink" href="#how-to-build-the-dependencies-on-summit" title="Link to this heading">Â¶</a></h1>
<ul>
<li><p>Our attempt to use spack on Summit to build all the dependencies so far failed and for now we are doing it manually.</p></li>
<li><p>Load the following modules</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">gcc</span><span class="o">/</span><span class="mf">7.4.0</span>	
<span class="n">module</span> <span class="n">load</span> <span class="n">zeromq</span><span class="o">/</span><span class="mf">4.2.5</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">libfabric</span><span class="o">/</span><span class="mf">1.7.0</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">python</span><span class="o">/</span><span class="mf">3.7.0</span><span class="o">-</span><span class="n">anaconda3</span><span class="o">-</span><span class="mf">5.3.0</span>
</pre></div>
</div>
</li>
<li><p>Create conda environment</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">Test</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">conda</span> <span class="n">pip</span> <span class="n">numpy</span> <span class="n">scipy</span> <span class="n">pandas</span> <span class="n">matplotlib</span>
<span class="n">source</span> <span class="n">activae</span> <span class="n">Test</span>
</pre></div>
</div>
</li>
<li><p>Build mpi4py from source (using <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code> is not a good idea since we want to make sure that system MPI is used)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bitbucket</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mpi4py</span><span class="o">/</span><span class="n">mpi4py</span><span class="o">/</span><span class="n">downloads</span><span class="o">/</span><span class="n">mpi4py</span><span class="o">-</span><span class="mf">3.0.3</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="n">xvf</span> <span class="n">mpi4py</span><span class="o">-</span><span class="mf">3.0.3</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">cd</span> <span class="n">mpi4py</span><span class="o">-</span><span class="mf">3.0.3</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>Install Cheetah/Savanna</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">CODARcode</span><span class="o">/</span><span class="n">cheetah</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">cheetah</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>Build simplest ADIOS installation with python support</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/ornladios/ADIOS2.git ADIOS2
cd ADIOS2
mkdir build
cd build
cmake -DCMAKE_CXX_COMPILER=`which g++` -DCMAKE_C_COMPILER=`which gcc` -DCMAKE_Fortran_COMPILER:FILEPATH=`which gfortran` \
-DADIOS2_USE_MPI:STRING=True -DCMAKE_INSTALL_PREFIX=$HOME/SOFT_INSTALL/adios-2.5_simplest-gcc-7.4.0 -DADIOS2_USE_HDF5:STRING=False 
-DADIOS2_USE_SZ:STRING=False  -DADIOS2_USE_ZFP:STRING=False -DADIOS2_USE_Blosc:STRING=False -DADIOS2_USE_BZip2:STRING=False 
-DADIOS2_USE_PNG:STRING=False -DADIOS2_USE_DataMan:STRING=True  -DADIOS2_USE_Fortran:STRING=False ..
make -j20
make install
</pre></div>
</div>
</li>
<li><p>Create a module (lua file) to use ADIOS, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;HOME&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="s1">&#39;/SOFT_INSTALL/adios-2.5_simplest-gcc-7.4.0/&#39;</span>
<span class="n">prepend_path</span><span class="p">(</span><span class="s1">&#39;PATH&#39;</span><span class="p">,</span> <span class="nb">dir</span> <span class="o">..</span> <span class="s1">&#39;bin&#39;</span><span class="p">)</span>
<span class="n">prepend_path</span><span class="p">(</span><span class="s1">&#39;LD_LIBRARY_PATH&#39;</span><span class="p">,</span> <span class="nb">dir</span> <span class="o">..</span> <span class="s1">&#39;lib64&#39;</span><span class="p">)</span>
<span class="n">prepend_path</span><span class="p">(</span><span class="s1">&#39;CPATH&#39;</span><span class="p">,</span> <span class="nb">dir</span> <span class="o">..</span> <span class="s1">&#39;include&#39;</span><span class="p">)</span>
<span class="n">prepend_path</span><span class="p">(</span><span class="s1">&#39;PYTHONPATH&#39;</span><span class="p">,</span> <span class="nb">dir</span> <span class="o">..</span> <span class="s1">&#39;lib64/python3.6/site-packages&#39;</span><span class="p">)</span>
<span class="n">setenv</span><span class="p">(</span><span class="s1">&#39;ADIOS2_DIR&#39;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>

</pre></div>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">use</span> <span class="pre">...</span></code> to make the corresponding directory with modules visible and load ADIOS, for example, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">Compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="mf">7.4.0</span><span class="o">/</span><span class="n">adios2</span><span class="o">/</span><span class="mf">2.5</span><span class="n">_simplest</span><span class="o">-</span><span class="n">gcc</span><span class="o">-</span><span class="mf">7.4.0</span>
</pre></div>
</div>
</li>
<li><p>Launch python interpreter and test that you can</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">adios2</span>
<span class="kn">import</span> <span class="nn">cheetah</span>
<span class="kn">import</span> <span class="nn">mpi4py</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">pandas</span>
</pre></div>
</div>
</li>
<li><p>If it worked, you are ready to run tests</p></li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">ICICLE-READTHEDOCS</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">AI for CI-for-AI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">HARP - HPC Application Runtime Predictor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../README.html#acknowledgements">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iSpLib/README.html">iSpLib - An Intelligent Sparse Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iSpLib/README.html#acknowledgements">Acknowledgements</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Architecture and Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tapis-project/README.html">Base ICICLE Tapis Software - Tapis is a hosted, web-based API framework for securely managing computational workloads across infrastructure and institutions so that experts can focus on their research instead of the technology.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../event-engine/README.html">Event Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../event-engine/README.html#acknowledgement">Acknowledgement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hello_icicle_auth_clients/README.html">Hello ICICLE Authentication Clients - Hello ICICLE Authentication consists of two command line interface (CLI) tools to authenticate with the Tapis Pods service. The first tool, ICICONSOLE, is specifically tailored to working with Neo4j databases hosted through the Tapis Pods. The second tool, TapisCL-ICICLE, allows the user to manage, operate, and interactively explore Tapis services.</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, ICICLE.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/harp/cheetah/tests/build_summit.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>